{"version":3,"sources":["dummy-paces/data/diagrams/os.svg","tfw/factory/dialog.yaml","dummy-paces/data/data.ts","tfw/converter/boolean.ts","tfw/converter/integer.ts","tfw/converter/unit.ts","tfw/icons.ts","tfw/view/icon.tsx","tfw/converter/string.ts","tfw/view/label/label.tsx","tfw/view/input/input.tsx","dummy-paces/view/diagram/diagram.tsx","tfw/random.ts","tfw/layout/flex.tsx","tfw/converter/string-array.ts","tfw/escape-handler.ts","tfw/gesture/moves.ts","tfw/gesture/finger.ts","tfw/gesture/basic-handler.ts","tfw/gesture/gesture.ts","tfw/color.ts","tfw/theme.ts","tfw/converter/function.ts","tfw/behavior/touchable.ts","tfw/intl.ts","tfw/view/button.tsx","tfw/converter/array.ts","tfw/factory/dialog.tsx","dummy-paces/view/diagram-exam/diagram-exam.tsx","tfw/util.ts","dummy-paces/app/app.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","load","id","label","questions","MENDELEEV","map","item","toUpperCase","answer","asked","failed","castBoolean","v","defaultValue","text","trim","toLowerCase","num","parseInt","isNaN","castInteger","defVal","Math","floor","startsWith","hexa","substr","parseFloat","RX_CSS_UNIT","castUnit","m","exec","scalar","unit","length","draw","d","stroke","fill","iconsBook","android","bug","camera","cancel","center","child","close","code","copy","counter","cut","delete","direction","down","edit","eraser","file","r","folder","font","fullscreen","gear","gps","hand","heart","hide","home","image","import","improvement","info","left","link","location","logout","mail","menu","minus","more","movie","ok","pack","pause","play","plug","plus","print","question","redo","refresh","right","run","search","select","sitemap","unselect","share","show","speaker","star","stat","twitter","undo","up","user","wait","warning","synonyms","add","back","help","save","Object","keys","key","val","EnumPenColor","Icon","props","refIcon","visible","timeoutHandle","React","name","sort","elemIcon","this","current","window","clearTimeout","requestAnimationFrame","classList","remove","slot","onHide","setTimeout","p","enabled","animate","flipH","flipV","size","content","Array","isArray","castContent","rotate","onClick","classes","svgContent","createSvgContent","push","transform","style","width","height","triggerVisibleAnimation","className","join","ref","viewBox","preserveAspectRatio","undefined","strokeWidth","strokeLinecap","strokeLinejoin","def","elementName","attributes","children","arg1","arg2","parseDef","attribs","split","forEach","attribName","attribValue","CLASSES","indexOf","PENS","pen","manageColors","index","castString","value","t","Label","htmlFor","Component","Input","input","handleKeyDown","evt","preventDefault","stopPropagation","onEnterPressed","onFocus","event","type","setSelectionRange","onBlur","onChange","target","placeholder","wide","focus","max","globalId","inputClassName","maxWidth","autoFocus","disabled","onKeyDown","Diagram","createRef","lastHtmlContent","highligthableItems","refreshSvg","highlightItem","htmlContent","div","innerHTML","items","querySelectorAll","getAttribute","console","charAt","opacity","onItemsChange","names","itemToShow","pick","elements","int","float","min","random","Flex","dir","justifyContent","alignItems","flexWrap","wrap","defaultArray","defaultString","castStringArray","listener","initialized","document","addEventListener","fire","handlers","handler","pop","CAPACITY","Moves","x","y","_x0","_y0","_time0","_x","_y","_time","_cursor","init","now","shift","idx","Date","idx0","idx1","_index","time","time0","time1","time01","idx2","time12","x0","x1","y0","y1","Finger","fingers","identifier","indexOfFirstNull","movingElements","movingElem","cancelBubble","handleMove","clientX","clientY","pointer","buttons","translateButtons","clear","createClear","ex","error","handleUp","splice","BasicHandler","element","handleDown","mouseType","mouseTypeTime","deviceHandlers","pressed","attachDownEvent","call","attachUpEventTouch","delay","touchstart","touchend","mousedown","removeEventListener","attachDownEventTouch","attachDownEventMouse","checkMouseType","rect","getBoundingClientRect","changedTouches","touch","getIndex","top","metaKey","ctrlKey","SYMBOL","Symbol","ID","STANDARD_EVENTS","Gesture","elem","pointers","bind","rawHandlers","eventName","wheel","deltaX","deltaY","deltaZ","wrapSpecialHandlers","assign","isDown","moves","ptr","getPointer","recognizeTap","recognizeSwipe","recognizePan","tap","elapsedTime","abs","startX","startY","recognizePanDown","recognizePanUp","pan","hasHandlerFor","sx","speedX","speedY","dx","pandown","panvertical","panup","recognizeSwipeDown","recognizeSwipeUp","recognizeSwipeLeft","swipe","dy","swipedown","swipevertical","swipeup","swipeleft","swipehorizontal","Color","codeCSS","R","G","B","H","S","L","A","parse","parseHexa","parseRGB","parseRGBA","parseHSL","luminance","color","hexa2","newColor","chroma","delta","INV6","INV15","INV255","RX_RGB","clamp01","RX_RGBA","RX_HSL","INV359","INV99","hsl2rgb","stringify","luminanceStep","color1","color2","alpha","beta","newRGBA","newRGB","red","green","blue","out","toString","register","registerTheme","apply","body","THEMES","css","get","vars","bg0","makeGetCurrentColor","bg1","bg2","bg3","bgP","bgPD","bgPL","bgS","bgSD","bgSL","black","white","isDark","colorName","$isDark","average","mix","isThemeGloballyDark","varName","setFontSize","html","documentElement","normalize","completeWithDefaultValues","COLOR","THEME_COLOR_NAMES","themeName","_style","s","ALPHA_HEXA","a","letter","codeVariables","codeBackground","elevationColor","addAlpha","ELEVATIONS","elevationKey","elevation","codeElevation","depth","fgColorName","bgColorName","styleFgColorName","styleBgColorName","bgClass","fgClass","position","piecesFG","piecesSVG","piecesBG","tail","codeText","styleElement","createElement","getElementsByTagName","appendChild","textContent","completeBackgrounds","has0","has1","has2","has3","rgb2hsl","darkenBackground","color0","r0","g0","b0","color3","r3","g3","b3","dark","light","rotateHue","bg","EMPTY_FUNCTION","Touchable","args","_element","_enabled","accent","onTap","castFunction","that","gesture","on","keydown","getComputedStyle","screen","createScreen","borderRadius","getPropertyValue","w","h","radius","ceil","sqrt","ripple","background","Theme","removeChild","Mode","Button","touchable","handleClick","tag","icon","flat","small","concat","castArray","gCurrentLanguage","localStorage","getItem","navigator","language","Intl","translations","params","translation","addParams","languages","lang","vocabulary","Error","instance","translate","intl","defaultText","toIntl","result","_value","setItem","output","mark","mode","Text","paramIndex","c","Escape","Placeholder","_","make","require","alert","Promise","resolve","dialog","Dialog","onClose","footer","confirm","caption","title","confirmed","btnCancel","btnOK","options","_screen","_options","closeOnEscape","EscapeHandler","_hide","opt","header","ReactDOM","render","task","reject","then","DiagramExam","handleAnswerChange","setState","handleAnswer","state","solution","attempts","successes","reload","pickNewSolution","failure","handleItemsChange","handleErrorClick","currentSolution","i","Rnd","diagramCode","diagramLabel","url","fetch","response","status","statusText","catch","App","handleAbort","currentCategory","currentQuestionIndex","currentAnswer","answersCount","failuresCount","expectedAnswer","answerVisible","nextQuestion","handleCloseAnswer","handleDiagramItemsChange","currentDiagramItem","Random","categories","currentDiagramCode","Data","Util","Os","splash","getElementById","Boolean","hostname","match","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f9d95844.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/os.ae1d2714.svg\";","module.exports = {\"en\":{\"cancel\":\"Cancel\",\"close\":\"Close\",\"ok\":\"Ok\"},\"fr\":{\"cancel\":\"Annuler\",\"close\":\"Fermer\",\"ok\":\"OK\"}}","import { ICategory } from '../types'\n\nexport default {\n    load\n}\n\n\n\n\nfunction load(): ICategory[] {\n    return [{\n        id: \"MENDELEEV\",\n        label: \"Mendeleev\",\n        questions: MENDELEEV.map((item: any) => ({\n            label: `Donnez le numro atomique et le symbole pour l'lment suivant:\\n\\n${item[2].toUpperCase()}`,\n            answer: `${item[0]} ${item[1]}`,\n            asked: 0,\n            failed: 0\n        }))\n    }]\n}\n\n\nconst MENDELEEV = [\n    [\"1\", \"H\", \"Hydrogen\"],\n    [\"2\", \"He\", \"Helium\"],\n    [\"3\", \"Li\", \"Lithium\"],\n    [\"4\", \"Be\", \"Beryllium\"],\n    [\"5\", \"B\", \"Boron\"],\n    [\"6\", \"C\", \"Carbon\"],\n    [\"7\", \"N\", \"Nitrogen\"],\n    [\"8\", \"O\", \"Oxygen\"],\n    [\"9\", \"F\", \"Fluorine\"],\n    [\"10\", \"Ne\", \"Neon\"],\n    [\"11\", \"Na\", \"Sodium\"],\n    [\"12\", \"Mg\", \"Magnesium\"],\n    [\"13\", \"Al\", \"Aluminium\"],\n    [\"14\", \"Si\", \"Silicon\"],\n    [\"15\", \"P\", \"Phosphorus\"],\n    [\"16\", \"S\", \"Sulfur\"],\n    [\"17\", \"Cl\", \"Chlorine\"],\n    [\"18\", \"Ar\", \"Argon\"],\n    [\"19\", \"K\", \"Potassium\"],\n    [\"20\", \"Ca\", \"Calcium\"],\n    [\"21\", \"Sc\", \"Scandium\"],\n    [\"22\", \"Ti\", \"Titanium\"],\n    [\"23\", \"V\", \"Vanadium\"],\n    [\"24\", \"Cr\", \"Chromium\"],\n    [\"25\", \"Mn\", \"Manganese\"],\n    [\"26\", \"Fe\", \"Iron\"],\n    [\"27\", \"Co\", \"Cobalt\"],\n    [\"28\", \"Ni\", \"Nickel\"],\n    [\"29\", \"Cu\", \"Copper\"],\n    [\"30\", \"Zn\", \"Zinc\"],\n    [\"31\", \"Ga\", \"Gallium\"],\n    [\"32\", \"Ge\", \"Germanium\"],\n    [\"33\", \"As\", \"Arsenic\"],\n    [\"34\", \"Se\", \"Selenium\"],\n    [\"35\", \"Br\", \"Bromine\"],\n    [\"36\", \"Kr\", \"Krypton\"],\n    [\"37\", \"Rb\", \"Rubidium\"],\n    [\"38\", \"Sr\", \"Strontium\"],\n    [\"39\", \"Y\", \"Yttrium\"],\n    [\"40\", \"Zr\", \"Zirconium\"],\n    [\"41\", \"Nb\", \"Niobium\"],\n    [\"42\", \"Mo\", \"Molybdenum\"],\n    [\"43\", \"Tc\", \"Technetium\"],\n    [\"44\", \"Ru\", \"Ruthenium\"],\n    [\"45\", \"Rh\", \"Rhodium\"],\n    [\"46\", \"Pd\", \"Palladium\"],\n    [\"47\", \"Ag\", \"Silver\"],\n    [\"48\", \"Cd\", \"Cadmium\"],\n    [\"49\", \"In\", \"Indium\"],\n    [\"50\", \"Sn\", \"Tin\"],\n    [\"51\", \"Sb\", \"Antimony\"],\n    [\"52\", \"Te\", \"Tellurium\"],\n    [\"53\", \"I\", \"Iodine\"],\n    [\"54\", \"Xe\", \"Xenon\"],\n    [\"55\", \"Cs\", \"Caesium\"],\n    [\"56\", \"Ba\", \"Barium\"],\n    [\"57\", \"La\", \"Lanthanum\"],\n    [\"58\", \"Ce\", \"Cerium\"],\n    [\"59\", \"Pr\", \"Praseodymium\"],\n    [\"60\", \"Nd\", \"Neodymium\"],\n    [\"61\", \"Pm\", \"Promethium\"],\n    [\"62\", \"Sm\", \"Samarium\"],\n    [\"63\", \"Eu\", \"Europium\"],\n    [\"64\", \"Gd\", \"Gadolinium\"],\n    [\"65\", \"Tb\", \"Terbium\"],\n    [\"66\", \"Dy\", \"Dysprosium\"],\n    [\"67\", \"Ho\", \"Holmium\"],\n    [\"68\", \"Er\", \"Erbium\"],\n    [\"69\", \"Tm\", \"Thulium\"],\n    [\"70\", \"Yb\", \"Ytterbium\"],\n    [\"71\", \"Lu\", \"Lutetium\"],\n    [\"72\", \"Hf\", \"Hafnium\"],\n    [\"73\", \"Ta\", \"Tantalum\"],\n    [\"74\", \"W\", \"Tungsten\"],\n    [\"75\", \"Re\", \"Rhenium\"],\n    [\"76\", \"Os\", \"Osmium\"],\n    [\"77\", \"Ir\", \"Iridium\"],\n    [\"78\", \"Pt\", \"Platinum\"],\n    [\"79\", \"Au\", \"Gold\"],\n    [\"80\", \"Hg\", \"Mercury\"],\n    [\"81\", \"Tl\", \"Thallium\"],\n    [\"82\", \"Pb\", \"Lead\"],\n    [\"83\", \"Bi\", \"Bismuth\"],\n    [\"84\", \"Po\", \"Polonium\"],\n    [\"85\", \"At\", \"Astatine\"],\n    [\"86\", \"Rn\", \"Radon\"],\n    [\"87\", \"Fr\", \"Francium\"],\n    [\"88\", \"Ra\", \"Radium\"],\n    [\"89\", \"Ac\", \"Actinium\"],\n    [\"90\", \"Th\", \"Thorium\"],\n    [\"91\", \"Pa\", \"Protactinium\"],\n    [\"92\", \"U\", \"Uranium\"],\n    [\"93\", \"Np\", \"Neptunium\"],\n    [\"94\", \"Pu\", \"Plutonium\"],\n    [\"95\", \"Am\", \"Americium\"],\n    [\"96\", \"Cm\", \"Curium\"],\n    [\"97\", \"Bk\", \"Berkelium\"],\n    [\"98\", \"Cf\", \"Californium\"],\n    [\"99\", \"Es\", \"Einsteinium\"],\n    [\"100\", \"Fm\", \"Fermium\"],\n    [\"101\", \"Md\", \"Mendelevium\"],\n    [\"102\", \"No\", \"Nobelium\"],\n    [\"103\", \"Lr\", \"Lawrencium\"],\n    [\"104\", \"Rf\", \"Rutherfordium\"],\n    [\"105\", \"Db\", \"Dubnium\"],\n    [\"106\", \"Sg\", \"Seaborgium\"],\n    [\"107\", \"Bh\", \"Bohrium\"],\n    [\"108\", \"Hs\", \"Hassium\"],\n    [\"109\", \"Mt\", \"Meitnerium\"],\n    [\"110\", \"Ds\", \"Darmstadtium\"],\n    [\"111\", \"Rg\", \"Roentgenium\"],\n    [\"112\", \"Cn\", \"Copernicium\"],\n    [\"113\", \"Nh\", \"Nihonium\"],\n    [\"114\", \"Fl\", \"Flerovium\"],\n    [\"115\", \"Mc\", \"Moscovium\"],\n    [\"116\", \"Lv\", \"Livermorium\"],\n    [\"117\", \"Ts\", \"Tennessine\"],\n    [\"118\", \"Og\", \"Oganesson\"]];\n","export default function castBoolean(v: any, defaultValue = false): boolean {\r\n    switch (typeof v) {\r\n        case \"undefined\":\r\n            return defaultValue;\r\n        case \"boolean\":\r\n            return v;\r\n        case \"number\":\r\n            return v !== 0;\r\n        case \"string\":\r\n            const text = v.trim().toLowerCase();\r\n            if (text === 'true' || text === 'yes') return true;\r\n            const num = parseInt(text);\r\n            if (!isNaN(num)) return num !== 0;\r\n            return false;\r\n        default:\r\n            return false;\r\n    }\r\n}\r\n","export default function castInteger(v: any, defaultValue = 0): number {\r\n    const defVal = Math.floor(.5 + defaultValue);\r\n\r\n    switch (typeof v) {\r\n        case \"boolean\":\r\n            return v ? 1 : 0;\r\n        case \"number\":\r\n            return Math.floor(.5 + v);\r\n        case \"string\":\r\n            const text = v.trim().toLowerCase();\r\n            if (text.startsWith(\"0x\")) {\r\n                const hexa = parseInt(text.substr(2), 16);\r\n                return isNaN(hexa) ? defVal : hexa;\r\n            }\r\n            if (text.startsWith(\"0b\")) {\r\n                const hexa = parseInt(text.substr(2), 2);\r\n                return isNaN(hexa) ? defVal : hexa;\r\n            }\r\n            if (text.startsWith(\"0o\")) {\r\n                const hexa = parseInt(text.substr(2), 8);\r\n                return isNaN(hexa) ? defVal : hexa;\r\n            }\r\n            const num = parseFloat(text);\r\n            if (isNaN(num)) return defVal;\r\n            return Math.floor(.5 + num);\r\n        default:\r\n            return defVal;\r\n    }\r\n}\r\n","const RX_CSS_UNIT = /^(-?[.0-9]+)[ \\n\\r]*([a-z%]*)/;\r\n\r\nexport default function castUnit(v: any, defaultValue: string = \"100%\") {\r\n    if (typeof v === 'number') return `${v}px`;\r\n    if (typeof v !== 'string') return defaultValue;\r\n    const text = `${v}`.trim().toLowerCase();\r\n    if (text === 'auto' || text === 'inherit') return text;\r\n    if (text.startsWith(\"calc(\")) return text;\r\n    const m = RX_CSS_UNIT.exec(text);\r\n    if (!m) return defaultValue;\r\n    const scalar = parseFloat(m[1]);\r\n    if (isNaN(scalar) || scalar === 0) return \"0\";\r\n    const unit = m[2].length < 1 ? \"px\" : m[2];\r\n    return `${scalar}${unit}`;\r\n}\r\n","/**\r\n * @module\r\n * This module provides a list of SVG icons definitions.\r\n * You can register new one if you wish.\r\n */\r\n\r\n\r\nexport type TIconDefinition =\r\n    [string, {}] |\r\n    [string, TIconDefinitionArray] |\r\n    [string, {}, TIconDefinitionArray] |\r\n    [string, TIconDefinitionArray, {}];\r\n\r\ninterface TIconDefinitionArray extends Array<TIconDefinition> { }\r\n\r\nexport interface IIconsDefinition {\r\n    [name: string]: TIconDefinition\r\n}\r\n\r\n\r\n\r\n/**\r\n * Register new icons.\r\n * @param {object}  icons - The  keys are the  name of the  icons, the\r\n * value is the object representing an SVG image.\r\n * @returns {undefined}\r\n */\r\nexport function register(icons: IIconsDefinition): void {\r\n    for (const key of Object.keys(icons)) {\r\n        const val: TIconDefinition = icons[key];\r\n        iconsBook[key] = val;\r\n    }\r\n};\r\n\r\n/**\r\n * @param {string} d - Path definition, as in the attribute `d` of the\r\n * SVG tag `path`.\r\n * @returns {array} SVG description.\r\n */\r\nfunction draw(d: string): TIconDefinition {\r\n    return ['path', { d, stroke: 'none', fill: 0 }];\r\n}\r\n\r\n\r\nexport const iconsBook: IIconsDefinition = {\r\n    android: draw('M15,-35H10V-40H15M-10,-35H-15V-40H-10M18,-49L24,-56C25,-57,25,-58,24,-59C23,-60,22,-60,21,-59L13,-52C9,-54,5,-55,0,-55C-5,-55,-9,-54,-13,-52L-21,-59C-22,-60,-23,-60,-24,-59C-25,-58,-25,-57,-24,-56L-18,-49C-25,-44,-30,-35,-30,-25H30C30,-35,25,-44,18,-49M43,-20A8,8,0,0,0,35,-12V23A8,8,0,0,0,43,30A8,8,0,0,0,50,23V-12A8,8,0,0,0,43,-20M-42,-20A8,8,0,0,0,-50,-12V23A8,8,0,0,0,-42,30A8,8,0,0,0,-35,23V-12A8,8,0,0,0,-42,-20M-30,30A5,5,0,0,0,-25,35H-20V53A8,8,0,0,0,-12,60A8,8,0,0,0,-5,53V35H5V53A8,8,0,0,0,13,60A8,8,0,0,0,20,53V35H25A5,5,0,0,0,30,30V-20H-30V30Z'),\r\n    bug: draw(\"M10,0H-10V-10H10M10,20H-10V10H10M40,-20H26C24,-24 21,-27 17,-30L25,-38L18,-45L7,-34C5,-35 3,-35 0,-35C-2,-35 -5,-35 -7,-34L-18,-45L-25,-38L-17,-30C-21,-27 -24,-24 -26,-20H-40V-10H-30C-30,-8 -30,-7 -30,-5V0H-40V10H-30V15C-30,17 -30,18 -30,20H-40V30H-26C-21,39 -11,45 0,45C11,45 21,39 26,30H40V20H30C30,18 30,17 30,15V10H40V0H30V-5C30,-7 30,-8 30,-10H40V-20Z\"),\r\n    camera: draw('M-40,-40H-25L-15,-50H15L25,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M0,-25A25,25,0,0,0,-25,0A25,25,0,0,0,0,25A25,25,0,0,0,25,0A25,25,0,0,0,0,-25M0,-15A15,15,0,0,1,15,0A15,15,0,0,1,0,15A15,15,0,0,1,-15,0A15,15,0,0,1,0,-15Z'),\r\n    cancel: draw('M7,0L35,28V35H28L0,7L-28,35H-35V28L-7,0L-35,-28V-35H-28L0,-7L28,-35H35V-28L7,0Z'),\r\n    center: draw(\r\n        'M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M35,35H15V45H35A10,10,0,0,0,45,35V15H35M35,-45H15V-35H35V-15H45V-35A10,10,0,0,0,35,-45M-35,-35H-15V-45H-35A10,10,0,0,0,-45,-35V-15H-35M-35,15H-45V35A10,10,0,0,0,-35,45H-15V35H-35V15Z'\r\n    ),\r\n    child: draw('M5,-50V-10H45A40,40,0,0,0,5,-50M37,19C42,13,45,4,45,-5H-28L-32,-15H-50V-5H-39C-39,-5,-29,15,-28,17C-34,20,-37,26,-37,33A18,18,0,0,0,-20,50C-11,50,-4,44,-3,35H8C9,44,16,50,25,50A18,18,0,0,0,43,33C43,27,40,23,37,19M-20,40A8,8,0,0,1,-27,33A8,8,0,0,1,-20,25A8,8,0,0,1,-12,33A8,8,0,0,1,-20,40M25,40A8,8,0,0,1,18,33A8,8,0,0,1,25,25A8,8,0,0,1,33,33A8,8,0,0,1,25,40Z'),\r\n    close: draw('M0,-50C28,-50,50,-28,50,0C50,28,28,50,0,50C-28,50,-50,28,-50,0C-50,-28,-28,-50,0,-50M18,-25L0,-7L-18,-25L-25,-18L-7,0L-25,18L-18,25L0,7L18,25L25,18L7,0L25,-18L18,-25Z'),\r\n    code: draw('M13,23L36,0L13,-23L20,-30L50,0L20,30L13,23M-13,23L-36,0L-13,-23L-20,-30L-50,0L-20,30L-13,23Z'),\r\n    copy: draw('M35,45H-20V-25H35M35,-35H-20A10,10,0,0,0,-30,-25V45A10,10,0,0,0,-20,55H35A10,10,0,0,0,45,45V-25A10,10,0,0,0,35,-35M20,-55H-40A10,10,0,0,0,-50,-45V25H-40V-45H20V-55Z'),\r\n    counter: draw('M-40,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M-40,-30V30H-5V-30H-40M40,30V-30H34C35,-27,35,-25,35,-24C34,-21,32,-17,31,-16L20,-3L36,-4L36,3L10,2L10,-3C10,-3,25,-19,26,-20C27,-22,30,-30,23,-30C16,-30,17,-23,17,-23L9,-23C9,-23,9,-27,11,-30H5V30H18L18,26L23,26C23,26,27,25,27,20C28,15,23,15,23,15C22,15,17,16,17,20H10C10,20,10,9,23,9C36,9,35,20,35,20C35,20,35,26,29,28L32,30H40M-15,20H-23V-9L-32,-6V-12L-16,-18H-15V20Z'),\r\n    cut: draw('M35,-45L5,-15L15,-5L50,-40V-45M0,3A3,3,0,0,1,-2,0A3,3,0,0,1,0,-2A3,3,0,0,1,3,0A3,3,0,0,1,0,3M-30,40A10,10,0,0,1,-40,30C-40,24,-35,20,-30,20A10,10,0,0,1,-20,30C-20,36,-24,40,-30,40M-30,-20A10,10,0,0,1,-40,-30C-40,-36,-35,-40,-30,-40A10,10,0,0,1,-20,-30C-20,-24,-24,-20,-30,-20M-12,-22C-11,-24,-10,-27,-10,-30A20,20,0,0,0,-30,-50A20,20,0,0,0,-50,-30A20,20,0,0,0,-30,-10C-27,-10,-24,-11,-22,-12L-10,0L-22,12C-24,11,-27,10,-30,10A20,20,0,0,0,-50,30A20,20,0,0,0,-30,50A20,20,0,0,0,-10,30C-10,27,-11,24,-12,22L0,10L35,45H50V40L-12,-22Z'),\r\n    delete: draw(\r\n        'M35,-40H18L13,-45H-12L-17,-40H-35V-30H35M-30,35A10,10,0,0,0,-20,45H20A10,10,0,0,0,30,35V-25H-30V35Z'),\r\n    direction: draw('M10,13V0H-10V15H-20V-5A5,5,0,0,1,-15,-10H10V-22L28,-5M49,-4L4,-49H3C2,-50,-2,-50,-4,-49L-49,-4C-50,-2,-50,2,-49,4L-4,49C-2,50,2,51,4,49L49,4C51,2,51,-2,49,-4Z'),\r\n    down: draw('M-30,-30L0,30,30,-30'),\r\n    'down-double': draw('M-30,-40L0,-10,30,-40M-30,10L0,40,30,10'),\r\n    edit: draw(\r\n        \"M24,-46C22,-46,20,-46,19,-44L8,-34L35,-7L45,-17C48,-21,48,-25,45,-28L29,-44C28,-46,26,-46,24,-46M5,-30L-36,11L-23,12L-22,23L-11,24L-9,37L31,-3M-39,15L-47,49L-14,40L-15,29L-27,28L-28,16\"\r\n    ),\r\n    eraser: draw('M21,-42L46,-17C50,-14,50,-7,46,-3L0,43C-8,50,-20,50,-28,43L-46,25C-50,21,-50,15,-46,11L7,-42C11,-46,17,-46,21,-42M-39,18L-21,36C-17,39,-11,39,-7,36L11,18L-14,-7L-39,18Z'),\r\n    'export': draw('M-35,40H35V30H-35M35,-15H15V-45H-15V-15H-35L0,20L35,-15Z'),\r\n    file: draw('M10,-50H-30A10,10,0,0,0,-40,-40V40A10,10,0,0,0,-30,50H30A10,10,0,0,0,40,40V-20L10,-50M30,40H-30V-40H5V-15H30V40Z'),\r\n    \"flag-jp\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,50h130v-100h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,45h120v-90h-120z\"\r\n            }],\r\n            [\"circle\", {\r\n                fill: \"#bc002d\",\r\n                r: 24\r\n            }]\r\n        ]\r\n    ],\r\n    \"flag-fr\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,50h130v-100h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#002395\",\r\n                d: \"M-60,45h40v-90h-40z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-20,45h40v-90h-40z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#ed2939\",\r\n                d: \"M20,45h40v-90h-40z\"\r\n            }]\r\n        ]\r\n    ],\r\n    \"flag-it\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,50h130v-100h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#009246\",\r\n                d: \"M-60,45h40v-90h-40z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-20,45h40v-90h-40z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#ce2b37\",\r\n                d: \"M20,45h40v-90h-40z\"\r\n            }]\r\n        ]\r\n    ],\r\n    \"flag-de\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,41h130v-82h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#ffce00\",\r\n                d: \"M-60,36h120v-24h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#dd0000\",\r\n                d: \"M-60,12h120v-24h-120z\"\r\n            }]\r\n        ]\r\n    ],\r\n    \"flag-en\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,37h130v-75h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#bb133e\",\r\n                d: \"M-60,32h120v-65h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,22h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,12h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,2h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,-8h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,-18h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,-28h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#002664\",\r\n                d: \"M-60,-33h48v35h-48z\"\r\n            }],\r\n\r\n        ]\r\n    ],\r\n    folder: draw('M40,30H-40V-20H40M40,-30H0L-10,-40H-40C-46,-40,-50,-36,-50,-30V30A10,10,0,0,0,-40,40H40A10,10,0,0,0,50,30V-20C50,-26,46,-30,40,-30Z'),\r\n    font: draw('M25,-20H40V40H45V45H25V40H30V25H10L3,40H10V45H-10V40H-5L25,-20M30,-15L13,20H30V-15M-35,-45H-10C-4,-45,0,-41,0,-35V20H-15V-5H-30V20H-45V-35C-45,-41,-41,-45,-35,-45M-30,-35V-15H-15V-35H-30Z'),\r\n    'format-align-center': draw('M-45,-45H45V-35H-45V-45M-25,-25H25V-15H-25V-25M-45,-5H45V5H-45V-5M-25,15H25V25H-25V15M-45,35H45V45H-45V35Z'),\r\n    'format-align-justify': draw('M-45,-45H45V-35H-45V-45M-45,-25H45V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H45V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-align-left': draw('M-45,-45H45V-35H-45V-45M-45,-25H15V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H15V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-align-right': draw(' M-45,-45H45V-35H-45V-45M-15,-25H45V-15H-15V-25M-45,-5H45V5H-45V-5M-15,15H45V25H-15V15M-45,35H45V45H-45V35Z '),\r\n    'format-bold': draw('M8,18H-10V3H8A8,8,0,0,1,15,10A8,8,0,0,1,8,18M-10,-27H5A8,8,0,0,1,13,-20A8,8,0,0,1,5,-12H-10M18,-6C23,-9,26,-15,26,-20C26,-31,18,-40,6,-40H-25V30H10C21,30,29,22,29,11C29,3,24,-3,18,-6Z'),\r\n    'format-italic': draw('M-10,-40V-25H1L-16,15H-30V30H10V15H-1L16,-25H30V-40H-10Z'),\r\n    'format-float-center': draw('M-15,-25H15V5H-15V-25M-45,-45H45V-35H-45V-45M-45,15H45V25H-45V15M-45,35H25V45H-45V35Z'),\r\n    'format-float-left': draw('M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-25V-15H-5V-25H45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-float-none': draw('M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-float-right': draw('M15,-25H45V5H15V-25M-45,-45H45V-35H-45V-45M5,-25V-15H-45V-25H5M-15,-5V5H-45V-5H-15M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-header': draw('M-40,-40H-30V-10H-10V-40H0V30H-10V0H-30V30H-40V-40M13,-23L31,-5L13,13L20,20L45,-5L20,-30L13,-23Z'),\r\n    'format-underline': draw(\r\n        'M-35,45H35V35H-35V45M0,25A30,30,0,0,0,30,-5V-45H18V-5A18,18,0,0,1,0,13A18,18,0,0,1,-17,-5V-45H-30V-5A30,30,0,0,0,0,25Z'\r\n    ),\r\n    fullscreen: draw('M-35,-35H-10V-25H-25V-10H-35V-35M10,-35H35V-10H25V-25H10V-35M25,10H35V35H10V25H25V10M-10,25V35H-35V10H-25V25H-10Z'),\r\n    gear: draw(\r\n        'M0,18A18,18,0,0,1,-17,0A18,18,0,0,1,0,-17A18,18,0,0,1,18,0A18,18,0,0,1,0,18M37,5C37,3,38,2,38,0C38,-2,37,-3,37,-5L48,-13C49,-14,49,-15,48,-16L38,-34C38,-35,36,-35,35,-35L23,-30C20,-32,18,-33,14,-35L13,-48C12,-49,11,-50,10,-50H-10C-11,-50,-12,-49,-12,-48L-14,-35C-17,-33,-20,-32,-23,-30L-35,-35C-36,-35,-38,-35,-38,-34L-48,-16C-49,-15,-49,-14,-48,-13L-37,-5C-37,-3,-37,-2,-37,0C-37,2,-37,3,-37,5L-48,13C-49,14,-49,15,-48,16L-38,34C-38,35,-36,35,-35,35L-23,30C-20,32,-17,33,-14,35L-12,48C-12,49,-11,50,-10,50H10C11,50,12,49,13,48L14,35C18,33,20,32,23,30L35,35C36,35,38,35,38,34L48,16C49,15,49,14,48,13L37,5Z'\r\n    ),\r\n    gps: draw(\r\n        'M0,-20A20,20,0,0,1,20,0A20,20,0,0,1,0,20A20,20,0,0,1,-20,0A20,20,0,0,1,0,-20M-45,5H-55V-5H-45C-42,-26,-26,-42,-5,-45V-55H5V-45C26,-42,43,-26,45,-5H55V5H45C43,26,26,43,5,45V55H-5V45C-26,43,-42,26,-45,5M0,-35A35,35,0,0,0,-35,0A35,35,0,0,0,0,35A35,35,0,0,0,35,0A35,35,0,0,0,0,-35Z'\r\n    ),\r\n    hand: draw(\r\n        \"M-10,-50A10,10,0,0,1,0,-40V-17C0,-17,10,-19,10,-14C10,-14,20,-15,20,-10C20,-10,30,-11,30,-6C30,-6,40,-7,40,-2V15C40,20,25,45,25,50H-15C-15,50,-25,15,-40,5C-40,5,-45,-25,-20,0V-40A10,10,0,0,1,-10,-50Z\"\r\n    ),\r\n    heart: draw('M0,47L-7,40C-33,17,-50,1,-50,-17C-50,-33,-38,-45,-22,-45C-14,-45,-5,-41,0,-35C5,-41,14,-45,23,-45C38,-45,50,-33,50,-17C50,1,33,17,7,40L0,47Z'),\r\n    hide: draw(\r\n        'M-1,-15L15,1C15,1,15,0,15,0A15,15,0,0,0,0,-15C0,-15,-1,-15,-1,-15M-22,-11L-15,-3C-15,-2,-15,-1,-15,0A15,15,0,0,0,0,15C1,15,2,15,3,15L11,22C8,24,4,25,0,25A25,25,0,0,1,-25,0C-25,-4,-24,-8,-22,-11M-50,-39L-39,-27L-36,-25C-45,-18,-51,-10,-55,0C-46,22,-25,38,0,38C8,38,15,36,22,33L24,35L39,50L45,44L-44,-45M0,-25A25,25,0,0,1,25,0C25,3,24,6,23,9L38,24C45,18,51,9,55,0C46,-22,25,-37,0,-37C-7,-37,-14,-36,-20,-34L-9,-23C-6,-24,-3,-25,0,-25Z'\r\n    ),\r\n    home: draw('M-10,40V10H10V40H35V0H50L0,-45L-50,0H-35V40H-10Z'),\r\n    image: draw('M5,-15H33L5,-42V-15M-30,-50H10L40,-20V40A10,10,0,0,1,30,50H-30C-36,50,-40,46,-40,40V-40C-40,-46,-36,-50,-30,-50M-30,40H15L30,40V0L10,20L0,10L-30,40M-20,-15A10,10,0,0,0,-30,-5A10,10,0,0,0,-20,5A10,10,0,0,0,-10,-5A10,10,0,0,0,-20,-15Z'),\r\n    import: draw('M-15,20V-10H-35L0,-45L35,-10H15V20H-15M-35,40V30H35V40H-35Z'),\r\n    improvement: draw(\"M0,50A50,50,0,0,1,-50,0A50,50,0,0,1,0,-50A50,50,0,0,1,50,0A50,50,0,0,1,0,50M0,-25L-25,0H-10V20H10V0H25L0,-25Z\"),\r\n    info: draw('M8,-40A8,8,0,0,0,0,-32A8,8,0,0,0,8,-25A8,8,0,0,0,15,-32A8,8,0,0,0,8,-40M6,-16C0,-16,-17,-3,-17,-3C-17,-2,-17,-2,-16,-1C-16,1,-16,1,-15,0C-14,0,-12,-2,-9,-3C1,-10,-8,6,-12,32C-14,45,-2,39,1,37C4,35,12,29,13,28C14,28,13,27,12,26C12,25,11,26,11,26C8,28,2,32,1,29C0,27,6,7,9,-6C10,-10,12,-17,6,-16Z'),\r\n    left: ['path', { fill: 0, d: 'M40,-5V5H-20L8,33L0,40L-39,0L0,-40L8,-32L-20,-5H40Z' }],\r\n    'left-double': draw('M-10,-30L-40,0,-10,30M40,-30L10,0,40,30'),\r\n    link: draw('M-7,7C-5,9,-5,12,-7,14C-9,16,-12,16,-14,14C-24,4,-24,-11,-14,-21V-21L4,-39C13,-49,29,-49,39,-39C49,-29,49,-13,39,-4L31,4C32,0,31,-4,29,-8L32,-11C38,-16,38,-26,32,-32C26,-38,16,-38,11,-32L-7,-14C-13,-8,-13,1,-7,7M7,-14C9,-16,12,-16,14,-14C24,-4,24,11,14,21V21L-4,39C-13,49,-29,49,-39,39C-49,29,-49,13,-39,4L-31,-4C-31,0,-31,4,-29,8L-32,11C-38,16,-38,26,-32,32C-26,38,-16,38,-11,32L7,14C13,8,13,-1,7,-7C5,-9,5,-12,7,-14Z'),\r\n    location: draw('M0,-2A13,13,0,0,1,-12,-15A13,13,0,0,1,0,-27A13,13,0,0,1,13,-15A13,13,0,0,1,0,-2M0,-50A35,35,0,0,0,-35,-15C-35,11,0,50,0,50C0,50,35,11,35,-15A35,35,0,0,0,0,-50Z'),\r\n    logout: draw(\r\n        \"M25,26V10H-10V-10H25V-26L51,0L25,26M5,-50A10,10,0,0,1,15,-40V-20H5V-40H-40V40H5V20H15V40A10,10,0,0,1,5,50H-40A10,10,0,0,1,-50,40V-40A10,10,0,0,1,-40,-50H5Z\"\r\n    ),\r\n    mail: draw(\r\n        'M40,-40H-40A10,10,0,0,0,-50,-30V30A10,10,0,0,0,-40,40H40A10,10,0,0,0,50,30V-30A10,10,0,0,0,40,-40M40,30H-40V-20L0,5L40,-20V30M40,-30L0,-5L-40,-30V-30H40V-30Z'\r\n    ),\r\n    map: draw('M15,35L-15,24V-35L15,-24M43,-45C42,-45,42,-45,42,-45L15,-34L-15,-45L-43,-35C-44,-35,-45,-34,-45,-33V43A3,3,0,0,0,-42,45C-42,45,-42,45,-42,45L-15,34L15,45L43,36C44,35,45,34,45,33V-42A3,3,0,0,0,43,-45Z'),\r\n    \"map-layer\": draw('M0,20L37,-9L45,-15L0,-50L-45,-15L-37,-9M0,33L-37,4L-45,10L0,45L45,10L37,4L0,33Z'),\r\n    menu: draw('M-45,-30H45V-20H-45V-30M-45,-5H45V5H-45V-5M-45,20H45V30H-45V20Z'),\r\n    minus: draw('M35,5H-35V-5H35V5Z'),\r\n    \"minus-o\": draw('M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M-25,5H25V-5H-25'),\r\n    \"minus-small\": draw('M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M25,-5V5H-25V-5H25Z'),\r\n    more: draw('M20,0A10,10,0,0,1,30,-10A10,10,0,0,1,40,0A10,10,0,0,1,30,10A10,10,0,0,1,20,0M-10,0A10,10,0,0,1,0,-10A10,10,0,0,1,10,0A10,10,0,0,1,0,10A10,10,0,0,1,-10,0M-40,0A10,10,0,0,1,-30,-10A10,10,0,0,1,-20,0A10,10,0,0,1,-30,10A10,10,0,0,1,-40,0Z'),\r\n    movie: draw('M44,-49L25,-45L38,-27L48,-29L44,-49M10,-42L0,-40L14,-23L24,-25L10,-42M-15,-37L-24,-35L-11,-18L-1,-20L-15,-37M-39,-32L-44,-32A10,10,0,0,0,-52,-20L-50,-10L-25,-15L-39,-32M-50,-10V40C-50,46,-45,50,-40,50H40C46,50,50,46,50,40V-10H-50Z'),\r\n    ok: draw('M45,-25L-15,35L-42,8L-35,0L-15,21L38,-32L45,-25Z'),\r\n    pack: ['path', { fill: 0, d: 'M45,23C45,24,44,26,42,27L3,49C2,50,1,50,0,50C-1,50,-2,50,-3,49L-42,27C-44,26,-45,24,-45,23V-22C-45,-24,-44,-26,-42,-27L-3,-49C-2,-50,-1,-50,0,-50C1,-50,2,-50,3,-49L42,-27C44,-26,45,-24,45,-22V23M0,-39L-35,-20V20L0,39L35,20V-20L0,-39M0,-29L24,-15L0,-1L-24,-15L0,-29M25,14L5,26V8L25,-3V14M-5,26L-25,14V-3L-5,8V26Z' }],\r\n    pause: draw('M10,35H30V-35H10M-30,35H-10V-35H-30V35Z'),\r\n    play: draw('M-20,-34V36L35,1L-20,-34Z'),\r\n    plug: draw('M20,-25V-45H10V-25H-10V-45H-20V-25H-20C-25,-25,-30,-20,-30,-15V13L-12,30V45H13V30L30,13V-15C30,-20,25,-25,20,-25Z'),\r\n    plus: draw('M35,5H5V35H-5V5H-35V-5H-5V-35H5V-5H35V5Z'),\r\n    \"plus-o\": draw('M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M5,-25H-5V-5H-25V5H-5V25H5V5H25V-5H5V-25Z'),\r\n    \"plus-small\": draw('M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M-5,-25H5V-5H25V5H5V25H-5V5H-25V-5H-5V-25Z'),\r\n    print: ['path', {\r\n        fill: 0,\r\n        d: 'M30,-45H-30V-25H30M35,0A5,5,0,0,1,30,-5A5,5,0,0,1,35,-10A5,5,0,0,1,40,-5A5,5,0,0,1,35,0M20,35H-20V10H20M35,-20H-35A15,15,0,0,0,-50,-5V25H-30V45H30V25H50V-5A15,15,0,0,0,35,-20Z'\r\n    }],\r\n    question: draw(\"M-10,35H5V50H-10V35M0,-50C27,-49,38,-22,23,-2C18,3,12,7,8,11C5,15,5,20,5,25H-10C-10,17,-10,10,-7,5C-3,0,3,-3,8,-7C20,-18,17,-34,0,-35A15,15,0,0,0,-15,-20H-30A30,30,0,0,1,0,-50Z\"),\r\n    redo: draw('M32,-7C23,-15,11,-20,-2,-20C-26,-20,-45,-5,-52,16L-40,20C-35,4,-20,-7,-2,-7C7,-7,16,-4,23,2L5,20H50V-25L32,-7Z'),\r\n    refresh: draw('M28,-28C21,-35,11,-40,0,-40A40,40,0,0,0,-40,0A40,40,0,0,0,0,40C19,40,34,27,39,10H28C24,22,13,30,0,30A30,30,0,0,1,-30,0A30,30,0,0,1,0,-30C8,-30,16,-27,21,-21L5,-5H40V-40L28,-28Z'),\r\n    right: ['path', { fill: 0, d: 'M-40,-5V5H20L-7,33L0,40L39,0L0,-40L-7,-32L20,-5H-40Z' }],\r\n    'right-double': draw('M10,-30L40,0,10,30M-40,-30L-10,0,-40,30'),\r\n    run: draw('M23,-32A10,10,0,0,0,33,-42A10,10,0,0,0,23,-52A10,10,0,0,0,13,-42A10,10,0,0,0,23,-32M5,37L10,15L20,25V55H30V18L20,8L23,-7C29,0,39,5,50,5V-5C41,-5,33,-9,28,-17L23,-25C22,-28,18,-30,15,-30C13,-30,13,-29,11,-29L-15,-18V5H-5V-12L4,-15L-4,25L-28,20L-30,30L5,37M-40,-15A5,5,0,0,1,-45,-20A5,5,0,0,1,-40,-25H-25V-15H-40M-35,-35A5,5,0,0,1,-40,-40A5,5,0,0,1,-35,-45H-10V-35H-35M-45,5A5,5,0,0,1,-50,0A5,5,0,0,1,-45,-5H-25V5H-45Z'),\r\n    search: draw('M-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45M-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35Z'),\r\n    select: draw('M35,35H-35V-35H15V-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-5H35M-20,-10L-27,-2L-5,20L45,-30L38,-37L-5,6L-20,-10Z'),\r\n    sitemap: draw('M-15,-50V-20H-5V-5H-35C-41,-5,-45,-1,-45,5V20H-55V50H-25V20H-35V5H-5V20H-15V50H15V20H5V5H35V20H25V50H55V20H45V5C45,-1,41,-5,35,-5H5V-20H15V-50H-15Z'),\r\n    unselect: draw('M35,-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-35C45,-41,41,-45,35,-45M35,-35V35H-35V-35H35Z'),\r\n    share: draw('M30,20C26,20,23,22,20,24L-15,3C-15,2,-15,1,-15,0C-15,-1,-15,-2,-15,-3L20,-24C23,-22,26,-20,30,-20A15,15,0,0,0,45,-35A15,15,0,0,0,30,-50A15,15,0,0,0,15,-35C15,-34,15,-33,15,-31L-20,-11C-22,-13,-26,-15,-30,-15A15,15,0,0,0,-45,0A15,15,0,0,0,-30,15C-26,15,-22,13,-20,11L16,32C16,33,15,34,15,35C15,43,22,50,30,50C38,50,45,43,45,35A15,15,0,0,0,30,20Z'),\r\n    show: draw('M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M0,25A25,25,0,0,1,-25,0A25,25,0,0,1,0,-25A25,25,0,0,1,25,0A25,25,0,0,1,0,25M0,-37C-25,-37,-46,-22,-55,0C-46,22,-25,38,0,38C25,38,46,22,55,0C46,-22,25,-37,0,-37Z'),\r\n    \"skip-next\": draw('M20,30H30V-30H20M-30,30L13,0L-30,-30V30Z'),\r\n    \"skip-next2\": draw('M-40,-35V35L-5,0M30,-35V35H40V-35M-5,-35V35L30,0'),\r\n    \"skip-prev\": draw('M-30,30V-30H-20V30H-30M-12,0L30,-30V30L-12,0Z'),\r\n    \"skip-prev2\": draw('M40,-35V35L5,0M-30,-35V35H-40V-35M5,-35V35L-30,0'),\r\n    speaker: draw('M40,35L33,28C41,21,45,11,45,0C45,-11,41,-21,33,-28L40,-35C49,-26,55,-14,55,0C55,14,49,26,40,35M26,21L19,14C23,11,25,6,25,0C25,-6,23,-11,19,-14L26,-21C32,-16,35,-8,35,0C35,8,32,16,26,21M-40,-45H0A10,10,0,0,1,10,-35V35A10,10,0,0,1,0,45H-40A10,10,0,0,1,-50,35V-35A10,10,0,0,1,-40,-45M-20,-35A10,10,0,0,0,-30,-25A10,10,0,0,0,-20,-15A10,10,0,0,0,-10,-25A10,10,0,0,0,-20,-35M-20,-5A20,20,0,0,0,-40,15A20,20,0,0,0,-20,35A20,20,0,0,0,0,15A20,20,0,0,0,-20,-5M-20,5A10,10,0,0,1,-10,15A10,10,0,0,1,-20,25A10,10,0,0,1,-30,15A10,10,0,0,1,-20,5Z'),\r\n    \"speaker-off\": draw('M-50,-34L-44,-40L45,49L39,55L31,48C30,49,28,50,25,50H-25C-31,50,-35,46,-35,40V-19L-50,-34M0,30A15,15,0,0,1,-15,15C-15,11,-14,8,-11,5L-18,-2C-22,3,-25,8,-25,15A25,25,0,0,0,0,40C7,40,13,38,17,33L10,26C7,29,4,30,0,30M25,15A25,25,0,0,0,0,-10H-1L-34,-43C-33,-47,-29,-50,-25,-50H25A10,10,0,0,1,35,-40V26L25,16V15M0,-40C-6,-40,-10,-36,-10,-30A10,10,0,0,0,0,-20A10,10,0,0,0,10,-30C10,-36,5,-40,0,-40Z'),\r\n    \"split-vertical\": draw('M30,20V5H15V50H5V-50H15V-5H30V-20L50,0L30,20M-50,0L-30,20V5H-15V50H-5V-50H-15V-5H-30V-20L-50,0Z'),\r\n    \"split-horizontal\": draw('M-20,30H-5V15H-50V5H50V15H5V30H20L0,50L-20,30M0,-50L-20,-30H-5V-15H-50V-5H50V-15H5V-30H20L0,-50Z'),\r\n    star: draw('M0,26L31,45L23,10L50,-14L14,-17L0,-50L-14,-17L-50,-14L-23,10L-31,45L0,26Z'),\r\n    stat: draw('M-45,50V-20H-25V50H-45M-10,50V-50H10V50H-10M25,50V10H45V50H25Z'),\r\n    'switch': draw('M-45,-40V3L-30,-12L-15,5C-10,10,-10,15,-10,15V45H10V10C10,10,10,5,7,0C5,-5,0,-10,0,-10L-15,-27L-2,-40M30,-40L8,-18L10,-15C10,-15,15,-10,17,-5C18,-3,19,-1,19,1L45,-25'),\r\n    'tri-down': draw('M-23,-17L0,6L23,-17L30,-10L0,20L-30,-10L-23,-17Z'),\r\n    'tri-left': draw('M17,23L-6,0L17,-23L10,-30L-20,0L10,30L17,23Z'),\r\n    'tri-right': draw('M-17,23L6,0L-17,-23L-10,-30L20,0L-10,30L-17,23Z'),\r\n    'tri-up': draw('M-23,17L0,-6L23,17L30,10L0,-20L-30,10L-23,17Z'),\r\n    twitter: draw('M52,-30C48,-28,44,-27,40,-27C44,-29,48,-33,49,-38C45,-36,41,-34,36,-33C32,-37,26,-40,20,-40C8,-40,-1,-30,-1,-19C-1,-17,-1,-15,-1,-14C-19,-15,-34,-23,-45,-36C-47,-33,-48,-29,-48,-25C-48,-18,-44,-11,-38,-7C-42,-7,-45,-8,-48,-10C-48,-10,-48,-10,-48,-10C-48,1,-41,9,-31,11C-33,12,-35,12,-37,12C-38,12,-39,12,-41,12C-38,20,-30,26,-21,26C-28,32,-37,36,-47,36C-49,36,-51,36,-52,35C-43,41,-31,45,-19,45C20,45,42,12,42,-16C42,-17,42,-18,42,-19C46,-22,49,-26,52,-30Z'),\r\n    undo: draw('M3,-20C-11,-20,-23,-15,-32,-7L-50,-25V20H-5L-23,2C-16,-4,-7,-7,3,-7C20,-7,35,4,41,20L52,16C45,-5,26,-20,3,-20Z'),\r\n    up: draw('M-30,30L0,-30,30,30'),\r\n    'up-double': draw('M-30,40L0,10,30,40M-30,-10L0,-40,30,-10'),\r\n    user: draw(\r\n        'M0,-40A20,20,0,0,1,20,-20A20,20,0,0,1,0,0A20,20,0,0,1,-20,-20A20,20,0,0,1,0,-40M0,10C22,10,40,19,40,30V40H-40V30C-40,19,-22,10,0,10Z'\r\n    ),\r\n    wait: draw('M0,-5A5,5,0,0,0,-5,0A5,5,0,0,0,0,5A5,5,0,0,0,5,0A5,5,0,0,0,0,-5M3,-50C25,-50,26,-32,14,-26C9,-24,7,-19,6,-14C8,-13,10,-11,12,-9C30,-19,50,-15,50,3C50,25,32,26,26,14C24,9,19,7,14,6C13,8,11,10,9,12C19,30,15,50,-2,50C-25,50,-25,32,-14,26C-9,24,-7,19,-6,14C-8,13,-10,11,-12,9C-30,19,-50,15,-50,-2C-50,-25,-32,-26,-26,-14C-24,-9,-19,-7,-14,-6C-13,-8,-11,-10,-9,-12C-19,-30,-15,-50,3,-50Z'),\r\n    \"zoom-in\": draw('M18,10L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18M-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10M0,-10H-10V0H-15V-10H-25V-15H-15V-25H-10V-15H0V-10Z'),\r\n    \"zoom-out\": draw('M18,10H14L12,9C17,3,20,-4,20,-12A33,33,0,0,0,-12,-45A33,33,0,0,0,-45,-12A33,33,0,0,0,-12,20C-4,20,3,17,9,12L10,14V18L35,43L43,35L18,10M-12,10C-25,10,-35,0,-35,-12C-35,-25,-25,-35,-12,-35C0,-35,10,-25,10,-12C10,0,0,10,-12,10M-25,-15H0V-10H-25V-15Z'),\r\n    warning: draw('M0,-50L-55,45H55M0,-30L38,35H-38M-5,-10V10H5V-10M-5,20V30H5V20')\r\n};\r\n\r\n\r\n// Synonyms.\r\nconst synonyms: { [name: string]: string } = {\r\n    add: \"plus\",\r\n    back: \"left\",\r\n    help: \"question\",\r\n    save: \"export\"\r\n};\r\nfor (const key of Object.keys(synonyms)) {\r\n    const val: string = synonyms[key];\r\n    iconsBook[key] = iconsBook[val];\r\n}\r\n","import * as React from \"react\";\r\nimport castBoolean from \"../converter/boolean\";\r\nimport castInteger from \"../converter/integer\";\r\nimport castUnit from \"../converter/unit\";\r\nimport { iconsBook, TIconDefinition } from \"../icons\";\r\nimport \"./icon.css\";\r\n\r\nenum EnumPenColor { B, W, P, PD, PL, S, SD, SL }\r\n\r\ninterface IIconProps {\r\n    visible?: boolean;\r\n    content?: string | TIconDefinition;\r\n    size?: string | number;\r\n    enabled?: boolean;\r\n    animate?: boolean;\r\n    flipH?: boolean;\r\n    flipV?: boolean;\r\n    rotate?: number;\r\n    pen0?: EnumPenColor | string;\r\n    pen1?: EnumPenColor | string;\r\n    pen2?: EnumPenColor | string;\r\n    pen3?: EnumPenColor | string;\r\n    pen4?: EnumPenColor | string;\r\n    pen5?: EnumPenColor | string;\r\n    pen6?: EnumPenColor | string;\r\n    pen7?: EnumPenColor | string;\r\n    onClick?: () => void;\r\n    onHide?: () => void;\r\n}\r\n\r\nexport default class Icon extends React.Component<IIconProps, {}> {\r\n    static isValidIconName(name: string): boolean {\r\n        return typeof iconsBook[name] !== 'undefined';\r\n    }\r\n\r\n    static getAllIconNames(): string[] {\r\n        return Object.keys(iconsBook).sort();\r\n    }\r\n\r\n    private refIcon: any;\r\n    private visible: boolean;\r\n    private timeoutHandle: number;\r\n\r\n    constructor(props: IIconProps) {\r\n        super(props);\r\n        this.refIcon = React.createRef();\r\n        this.visible = false;\r\n        this.timeoutHandle = 0;\r\n    }\r\n\r\n    triggerVisibleAnimation() {\r\n        const\r\n            elemIcon = this.refIcon.current,\r\n            visible = this.visible;\r\n        if( !elemIcon ) return;\r\n        if (this.timeoutHandle) {\r\n            window.clearTimeout(this.timeoutHandle);\r\n            this.timeoutHandle = 0;\r\n        }\r\n        requestAnimationFrame(() => {\r\n            if (visible) elemIcon.classList.remove(\"zero\");\r\n            else {\r\n                elemIcon.classList.add(\"zero\");\r\n                const slot = this.props.onHide;\r\n                if (typeof slot === 'function') {\r\n                    this.timeoutHandle = window.setTimeout(slot, 300);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const\r\n            p = this.props,\r\n            visible = castBoolean(p.visible, true),\r\n            enabled = castBoolean(p.enabled, true),\r\n            animate = castBoolean(p.animate, false),\r\n            flipH = castBoolean(p.flipH, false),\r\n            flipV = castBoolean(p.flipV, false),\r\n            size = castUnit(p.size, \"28px\"),\r\n            content = castContent(p.content),\r\n            rotate = castInteger(p.rotate, 0),\r\n            onClick = p.onClick,\r\n            classes = [\"tfw-view-icon\"];\r\n        const svgContent = createSvgContent(content, p);\r\n        if (!svgContent) return null;\r\n\r\n        if (!enabled) classes.push(\"disabled\");\r\n        if (animate) classes.push(\"animate\");\r\n        if (visible) classes.push(\"zero\");\r\n        if (typeof onClick === 'function' && enabled) classes.push(\"active\");\r\n\r\n        let transform = \"\";\r\n        if (rotate !== 0) {\r\n            transform += `rotate(${rotate}deg) `;\r\n        }\r\n        if (flipH || flipV) {\r\n            transform += `scale(${flipH ? -1 : 1},${flipV ? -1 : 1})`;\r\n        }\r\n        const style: React.CSSProperties = { width: size, height: size };\r\n        if (transform.length > 0) style.transform = transform;\r\n\r\n        requestAnimationFrame(() => this.triggerVisibleAnimation());\r\n        this.visible = visible;\r\n\r\n        return (\r\n            <svg className={classes.join(\" \")}\r\n                ref={this.refIcon}\r\n                viewBox=\"-65 -65 130 130\"\r\n                preserveAspectRatio=\"xMidYMid\"\r\n                width={size}\r\n                height={size}\r\n                onClick={enabled ? onClick : undefined}\r\n                style={style}>\r\n                {svgContent}\r\n                < g strokeWidth=\"6\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" >\r\n                    {createSvgContent(content, p)}\r\n                </g>\r\n            </svg>\r\n        );\r\n    }\r\n}\r\n\r\nfunction createSvgContent(def: TIconDefinition, props: IIconProps, key: string = \"\"): any {\r\n    const\r\n        elementName = def[0],\r\n        { attributes, children } = parseDef(def);\r\n\r\n    if (typeof elementName === 'undefined') return <g key={key}></g>;\r\n\r\n    const attribs: React.Attributes = manageColors({ ...attributes }, props);\r\n    if (key.length > 0) attribs.key = key;\r\n\r\n    return React.createElement(\r\n        elementName,\r\n        attribs,\r\n        children.map((child, index) => createSvgContent(child, props, `${index}`))\r\n    ) as React.ReactSVGElement;\r\n}\r\n\r\nconst CLASSES = [\"P\", \"PL\", \"PD\", \"S\", \"SL\", \"SD\"];\r\nconst PENS = \"01234567\";\r\n\r\n/**\r\n * If the value of the attribute \"fill\" is an element of CLASSES,\r\n * it will be removed and replace with a class.\r\n * Same thing for the attibute \"stroke\".\r\n *\r\n * @example\r\n * manageColors({ fill: \"1\" }) === { className: \"thn-svg-fill-1\" }\r\n *\r\n * @param   attribs [description]\r\n * @param   props   [description]\r\n * @returns         [description]\r\n */\r\nfunction manageColors(attribs: { [key: string]: any }, props: IIconProps) {\r\n    // @TODO For special forms of \"fill\" and \"stroke\", add classes.\r\n    const classes = (attribs.className || \"\").split(\" \");\r\n\r\n    [\"fill\", \"stroke\"].forEach(attribName => {\r\n        const attribValue = `${attribs[attribName]}`;\r\n        if (typeof attribValue === 'undefined') return;\r\n        if (attribValue === 'undefined') return;\r\n        const key = `${attribValue}`.toUpperCase();\r\n        if (CLASSES.indexOf(key) === -1 && PENS.indexOf(key) === -1) return;\r\n        if (PENS.indexOf(attribValue) !== -1 ) {\r\n            // If we find fill=\"3\", then we must look for property pen3.\r\n            const pen = props[`pen${attribValue}`];\r\n            if( typeof pen === 'string' ) {\r\n                if( CLASSES.indexOf(pen) === -1 ) {\r\n                    attribs[attribName] = pen;\r\n                } else {\r\n                    delete attribs[attribName];\r\n                    classes.push(`thm-svg-${attribName}${pen}`);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n        delete attribs[attribName];\r\n        classes.push(`thm-svg-${attribName}${key}`);\r\n    });\r\n\r\n    attribs.className = classes.join(\" \").trim();\r\n    return attribs;\r\n}\r\n\r\nfunction parseDef([name, arg1, arg2]: TIconDefinition) {\r\n    let attributes: undefined | {},\r\n        children: undefined | any[];\r\n\r\n    if (Array.isArray(arg1)) children = arg1;\r\n    else if (typeof arg1 !== 'undefined') attributes = arg1;\r\n    if (Array.isArray(arg2)) children = arg2;\r\n    else if (typeof arg2 !== 'undefined') attributes = arg2;\r\n\r\n    if (typeof attributes === 'undefined') attributes = {};\r\n    if (typeof children === 'undefined') children = [];\r\n\r\n    return { attributes, children };\r\n}\r\n\r\nfunction castContent(content: string | TIconDefinition = \"ok\"): TIconDefinition {\r\n    if (Array.isArray(content)) return content;\r\n    return iconsBook[content] || [];\r\n}\r\n","export default function castString(value: any, defaultValue: string): string {\r\n    const t = typeof value;\r\n    if (t === 'number' && !isNaN(value)) {\r\n        return `${value}`;\r\n    }\r\n    if (t === 'string') return value;\r\n    return defaultValue;\r\n}\r\n","import React from \"react\"\r\n\r\nimport \"./label.css\"\r\n\r\ninterface ILabelProps {\r\n    label?: string;\r\n    htmlFor?: string;\r\n}\r\n\r\nexport default class Label extends React.Component<ILabelProps, {}> {\r\n    render() {\r\n        const label = this.props.label;\r\n        if( typeof label !== 'string' || label.trim().length === 0 ) return null;\r\n        return (<label className=\"tfw-view-Label\" htmlFor={this.props.htmlFor}>{\r\n            this.props.label\r\n        }</label>)\r\n    }\r\n}\r\n","import * as React from \"react\"\nimport \"./input.css\"\nimport castInteger from \"../../converter/integer\"\nimport castBoolean from \"../../converter/boolean\"\nimport castString from \"../../converter/string\"\nimport castUnit from \"../../converter/unit\"\nimport Label from \"../label\"\n\ninterface IStringSlot {\n    (value: string): void;\n}\n\ninterface IInputProps {\n    value: string;\n    label?: string;\n    wide?: boolean;\n    size?: number;\n    focus?: boolean;\n    width?: string;\n    enabled?: boolean;\n    placeholder?: string;\n    type?: \"text\" | \"password\" | \"submit\" | \"color\" | \"date\"\n    | \"datetime-local\" | \"email\" | \"month\" | \"number\" | \"range\"\n    | \"search\" | \"tel\" | \"time\" | \"url\" | \"week\";\n    validator?: (value: string) => boolean | RegExp;\n    onValidation?: (validation: boolean) => void;\n    onChange?: IStringSlot,\n    onEnterPressed?: (value: string) => void\n}\n\nexport default class Input extends React.Component<IInputProps, {}> {\n    private readonly input: React.RefObject<HTMLInputElement> = React.createRef();\n\n    handleKeyDown = (evt: React.KeyboardEvent<HTMLInputElement>) => {\n        if (evt.key === \"Enter\") {\n            evt.preventDefault();\n            evt.stopPropagation();\n            const { onEnterPressed, value } = this.props;\n            if (typeof onEnterPressed === 'function') {\n                onEnterPressed(value);\n            }\n        }\n    }\n\n    onFocus = (event: React.FocusEvent<HTMLInputElement>): void => {\n        const input = this.input ? this.input.current : null;\n        if (!input) return;\n        if (!input.classList) return;\n        input.classList.remove(\"thm-bg3\");\n        input.classList.add(\"thm-bgSL\");\n        if (this.props.type !== 'number') {\n            // setSelectionRange fails for \"number\" input.\n            input.setSelectionRange(0, input.value.length);\n        }\n    }\n\n    onBlur = (event: React.FocusEvent<HTMLInputElement>): void => {\n        const input = this.input ? this.input.current : null;\n        if (!input) return;\n        if (!input.classList) return;\n        input.classList.add(\"thm-bg3\");\n        input.classList.remove(\"thm-bgSL\");\n    }\n\n    onChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\n        //if (!this.checkValidity(event.target.value)) return;\n        const { onChange } = this.props;\n        if (typeof onChange === 'function') {\n            event.preventDefault();\n            onChange(event.target.value);\n        }\n    }\n\n    render() {\n        const\n            p = this.props,\n            type = castString(p.type, \"text\"),\n            label = castString(p.label, \"\"),\n            value = castString(p.value, \"\"),\n            placeholder = castString(p.placeholder, \"\"),\n            wide = castBoolean(p.wide, false),\n            focus = castBoolean(p.focus, false),\n            enabled = castBoolean(p.enabled, true),\n            size = Math.max(1, castInteger(p.size, 8)),\n            width = castUnit(p.width, \"auto\"),\n            id = nextId();\n        const classes = [\"tfw-view-input\"];\n        if (wide) classes.push(\"wide\");\n        /*\n        const header = (error ? <div className=\"error\">{error}</div> :\n            (label ? (<Label htmlFor={id} label={label}/>) : null));\n        */\n        const inputClassName = \"thm-ele-button \"\n            + (enabled ? 'thm-bg3' : 'thm-bg0');\n        return (<div\n                    className={classes.join(\" \")}\n                    style={{ width, maxWidth: width }}>\n            <Label htmlFor={id} label={label}/>\n            <input\n                ref={this.input}\n                autoFocus={focus}\n                className={inputClassName}\n                placeholder={placeholder}\n                disabled={!enabled}\n                type={type}\n                id={id}\n                size={size}\n                onFocus={this.onFocus}\n                onBlur={this.onBlur}\n                onChange={this.onChange}\n                onKeyDown={this.handleKeyDown}\n                value={value}/>\n        </div>);\n    }\n}\n\n\nlet globalId = 0;\nfunction nextId() {\n    return `tfw-view-input-${globalId++}`;\n}\n","import React from \"react\"\n\nimport \"./diagram.css\"\n\nconst INKSCAPE_LABEL_SELECTOR ='svg *[inkscape\\\\:label]'\n\ninterface IDiagramProps {\n    htmlContent: string,\n    itemToShow: string,\n    onItemsChange: (items: string[]) => void\n}\n\nexport default class Diagram extends React.Component<IDiagramProps, {}> {\n    private readonly ref: React.RefObject<HTMLDivElement> = React.createRef();\n    private lastHtmlContent: string = \"\"\n    private highligthableItems: {[key: string]: HTMLElement} = {}\n\n    componentDidMount() {\n        this.refresh()\n    }\n\n    componentDidUpdate() {\n        this.refresh()\n    }\n\n    refresh() {\n        this.refreshSvg();\n        window.setTimeout(() => this.highlightItem(), 20)\n    }\n\n    refreshSvg() {\n        const { htmlContent } = this.props\n        if (htmlContent === this.lastHtmlContent) return\n        this.lastHtmlContent = htmlContent\n        const div = this.ref.current\n        if (!div) return\n        div.innerHTML = htmlContent\n        const items = div.querySelectorAll(INKSCAPE_LABEL_SELECTOR);\n        const highligthableItems: {[key: string]: HTMLElement} = {}\n        for (const item of items) {\n            const label = item.getAttribute(\"inkscape:label\")\n            console.info(\"label=\", label);\n            if (!label) continue\n            if (label.charAt(0) === '#') {\n                highligthableItems[label.substr(1)] = item\n                item.style.opacity = '0'\n            }\n        }\n        this.props.onItemsChange(Object.keys(highligthableItems))\n        this.highligthableItems = highligthableItems\n    }\n\n    highlightItem() {\n        const names = Object.keys(this.highligthableItems)\n        const { itemToShow } = this.props\n\n        names.forEach((name: string) => {\n            const item = this.highligthableItems[name]\n            item.style.opacity = name === itemToShow ? '1' : '0'\n        }, this)\n    }\n\n    render() {\n        return (<div className=\"dummyPaces-view-Diagram\" ref={this.ref}>\n        </div>)\n    }\n}\n","export default {\n    pick, int, float\n}\n\n\nfunction pick(elements: any[]): any {\n    return elements[int(elements.length)]\n}\n\n\n/**\n * Return an integer between `min` and `max - 1` included.\n * If `max` is undefined, return an integer betwee 0 and `min - 1`\n */\nfunction int(min: number, max: number | undefined = undefined) {\n    return Math.floor(float(min, max))\n}\n\n\n/**\n * Return a float between `min` and `max - 1` included.\n * If `max` is undefined, return a float betwee 0 and `min - 1`\n */\nfunction float(min: number, max: number | undefined = undefined) {\n    if (typeof max === 'undefined') {\n        max = min;\n        min = 0;\n    }\n    return min + Math.random() * (max - min)\n}\n","import * as React from \"react\"\nimport castString from \"../converter/string\"\nimport castBoolean from \"../converter/boolean\"\nimport castStringArray from \"../converter/string-array\"\nimport \"./flex.css\"\n\ninterface IFlexProp {\n    wide?: boolean;\n    classes?: string[] | string;\n    dir?: \"row\" | \"row-reverse\" | \"column\" | \"column-reverse\" | \"wide\" | \"narrow\";\n    wrap?: \"nowrap\" | \"wrap\" | \"wrap-reverse\";\n    justifyContent?: \"flex-start\" | \"flex-end\" | \"center\" | \"space-around\" | \"space-between\" | \"space-evenly\";\n    alignItems?: \"stretch\" | \"flex-start\" | \"flex-end\" | \"center\";\n    children: React.ReactElement<any>[] | React.ReactElement<any>;\n}\n\nexport default class Flex extends React.Component<IFlexProp, {}> {\n    render() {\n        const p = this.props;\n        const wide = castBoolean(p.wide, true);\n        const dir = castString(p.dir, \"row\");\n        const style: React.CSSProperties = {\n            justifyContent: castString(p.justifyContent, \"space-around\"),\n            alignItems: castString(p.alignItems, \"center\"),\n            flexWrap: castString(p.wrap, \"wrap\")\n        };\n        const classes = [\"tfw-view-flex\", `dir-${dir}`];\n        classes.push(...castStringArray(p.classes));\n\n        if (wide) classes.push(\"wide\");\n\n        return (\n            <div className={classes.join(\" \")} style={style}>{\n                p.children\n            }</div>\n        )\n    }\n}\n","import castString from \"./string\";\n\n/**\n * If `value` is not an array, return `defaultArray`.\n * Else if `defaultString` is undefined, return `value`.\n * Else return a copy of `value` with a castString on all its elements.\n *\n * @param   value         [description]\n * @param   defaultArray  [description]\n * @param   defaultString [description]\n * @returns               [description]\n */\nexport default function castStringArray(\n    value: any, defaultArray: string[] = [], defaultString: string = \"\"\n) {\n    if (typeof value === 'string') return [value];\n    if (!Array.isArray(value)) return defaultArray;\n    if (typeof defaultString === 'undefined') return value;\n    return value.map(item => castString(item, defaultString));\n}\n","/**\r\n * The ESCAPE key is often used to close a dialog, collapse a combo list, ...\r\n * This module helps you nesting closable things.\r\n *\r\n * @example\r\n * import * from EscapeHandler from \"./tfw/escape-handler\"\r\n * EscapeHandler.add(() => myDialog.close());\r\n * EscapeHandler.fire();\r\n */\r\n\r\nexport default {add, fire};\r\n\r\ntype THandler = ()=>void;\r\n\r\nlet handlers:THandler[] = [];\r\nlet initialized = false;\r\n\r\nexport function add(listener: THandler) {\r\n    if( !initialized) {\r\n        initialized = true;\r\n        addKeyboardListener();\r\n    }\r\n\r\n    handlers.push(listener);\r\n}\r\n\r\nexport function fire() {\r\n    if( handlers.length === 0 ) return;\r\n    const handler = handlers.pop();\r\n    if (typeof handler === 'function') handler();\r\n}\r\n\r\nfunction addKeyboardListener() {\r\n    document.addEventListener(\"keydown\", evt => {\r\n        if( evt.key !== 'Escape') return;\r\n        fire();\r\n    }, true);\r\n}\r\n","const CAPACITY = 3;\r\n\r\n/**\r\n * Helper to manage a pointer move.\r\n * It gives you the location, the speed and the acceleration of your pointer.\r\n *\r\n * @type {[type]}\r\n */\r\nexport default class Moves {\r\n    private _x0: number;\r\n    private _y0: number;\r\n    private _time0: number;\r\n    private _x: number[] = new Array(CAPACITY);\r\n    private _y: number[] = new Array(CAPACITY);\r\n    private _time: number[] = new Array(CAPACITY);\r\n    private _cursor: number = 0;\r\n\r\n    constructor(x: number = 0, y: number = 0) {\r\n        this.init(x, y);\r\n    }\r\n\r\n    init(x: number, y: number) {\r\n        this._time0 = this.now;\r\n        this._x0 = x;\r\n        this._y0 = y;\r\n        this._x = this._x.fill(this._x0, 0, CAPACITY);\r\n        this._y = this._y.fill(this._y0, 0, CAPACITY);\r\n        this._time = this._time.fill(this._time0, 0, CAPACITY);\r\n    }\r\n\r\n    _index(shift: number) {\r\n        return (this._cursor + shift) % CAPACITY;\r\n    }\r\n\r\n    get now() { return Date.now(); }\r\n\r\n    add(x: number, y: number) {\r\n        const idx = (this._cursor + CAPACITY - 1) % CAPACITY;\r\n        this._time[idx] = this.now;\r\n        this._x[idx] = x;\r\n        this._y[idx] = y;\r\n        this._cursor = idx;\r\n    }\r\n\r\n    get elapsedTime() { return this.now - this._time0; }\r\n\r\n    get x() { return this._x[this._cursor]; }\r\n    get y() { return this._y[this._cursor]; }\r\n\r\n    get startX() { return this._x0; }\r\n    get startY() { return this._y0; }\r\n\r\n    get speedX() {\r\n        const idx0 = this._cursor;\r\n        const idx1 = this._index(1);\r\n        const time = this._time[idx0] - this._time[idx1];\r\n        if (time <= 0) return 0;\r\n        return (this._x[idx0] - this._x[idx1]) / time;\r\n    }\r\n\r\n    get speedY() {\r\n        const idx0 = this._cursor;\r\n        const idx1 = this._index(1);\r\n        const time = this._time[idx0] - this._time[idx1];\r\n        if (time <= 0) return 0;\r\n        return (this._y[idx0] - this._y[idx1]) / time;\r\n    }\r\n\r\n    get accelX() {\r\n        const idx0 = this._index(0);\r\n        const time0 = this._time[idx0];\r\n\r\n        const idx1 = this._index(1);\r\n        const time1 = this._time[idx1];\r\n\r\n        const time01 = time0 - time1;\r\n\r\n        if (time01 <= 0) return 0;\r\n\r\n        const idx2 = this._index(2);\r\n        const time2 = this._time[idx2];\r\n\r\n        const time12 = time1 - time2;\r\n\r\n        if (time12 <= 0) return 0;\r\n\r\n        const x0 = this._x[idx0];\r\n        const x1 = this._x[idx1];\r\n        const x2 = this._x[idx2];\r\n\r\n        const speed01 = (x0 - x1) / time01;\r\n        const speed12 = (x1 - x2) / time12;\r\n\r\n        return (speed01 - speed12) / time01;\r\n    }\r\n\r\n    get accelY() {\r\n        const idx0 = this._index(0);\r\n        const time0 = this._time[idx0];\r\n\r\n        const idx1 = this._index(1);\r\n        const time1 = this._time[idx1];\r\n\r\n        const time01 = time0 - time1;\r\n\r\n        if (time01 <= 0) return 0;\r\n\r\n        const idx2 = this._index(2);\r\n        const time2 = this._time[idx2];\r\n\r\n        const time12 = time1 - time2;\r\n\r\n        if (time12 <= 0) return 0;\r\n\r\n        const y0 = this._y[idx0];\r\n        const y1 = this._y[idx1];\r\n        const y2 = this._y[idx2];\r\n\r\n        const speed01 = (y0 - y1) / time01;\r\n        const speed12 = (y1 - y2) / time12;\r\n\r\n        return (speed01 - speed12) / time01;\r\n    }\r\n}\r\n","type TIdentifier = number | null;\r\n\r\nexport default class Finger {\r\n    private fingers: TIdentifier[] = [];\r\n\r\n    getIndex(identifier: number): number {\r\n        const index = this.fingers.indexOf(identifier);\r\n        if (index !== -1) return index;\r\n        const indexOfFirstNull = this.fingers.indexOf(null);\r\n        if (indexOfFirstNull !== -1) {\r\n            this.fingers[indexOfFirstNull] = identifier;\r\n            return indexOfFirstNull;\r\n        }\r\n        this.fingers.push(identifier);\r\n        return this.fingers.length - 1;\r\n    }\r\n\r\n    remove(identifier: number) {\r\n        const index = this.fingers.indexOf(identifier);\r\n        if (index !== -1) this.fingers[index] = null;\r\n    }\r\n}\r\n","/**\r\n * BasicHandler(\r\n *     element: HTMLElement,\r\n *     handleDown: TBasicHandler,\r\n *     handleUp: TBasicHandler,\r\n *     handleMove: TBasicHandler\r\n * )\r\n *\r\n * Deals with three basic events : DOWN, UP and MOVE.\r\n * If the device has several input mouses, we will return\r\n * only one event.\r\n *\r\n * A TBasicHandler is a synthetic event object:\r\n *   - x: X coordinate relative to the viewport, not including any scroll offset.\r\n *   - y: Y coordinate relative to the viewport, not including any scroll offset.\r\n *   - startX\r\n *   - startY\r\n *   - index: For multi-touch system. The first one is 0, the second is 1, etc.\r\n *   - buttons: 1 = left, 2 = right.\r\n *   - mouse: \"mouse\" | \"touch\" | \"pen\".\r\n *   - clear(): Call stopPropagation() and preventDefault() on this event.\r\n *\r\n */\r\nimport Finger from \"./finger\"\r\nimport { IBasicEvent } from \"./basic-handler.types\"\r\n\r\ninterface IMovingElement {\r\n    // Coords relative to the element.\r\n    x: number,\r\n    y: number,\r\n    index: number,\r\n    target: HTMLElement,\r\n    handleUp: (event: IBasicEvent) => void,\r\n    handleMove: (event: IBasicEvent) => void\r\n}\r\n\r\nconst movingElements: IMovingElement[] = [];\r\n\r\nwindow.addEventListener(\"mousemove\", (event: MouseEvent) => {\r\n    for (const movingElem of movingElements) {\r\n        if (event.cancelBubble) continue;\r\n        const { target, handleMove, x, y, index } = movingElem;\r\n        if (typeof handleMove !== 'function') continue;\r\n        try {\r\n            handleMove({\r\n                x: event.clientX - x,\r\n                y: event.clientY - y,\r\n                index,\r\n                event,\r\n                pointer: \"mouse\",\r\n                buttons: translateButtons(event),\r\n                target,\r\n                clear: createClear(event)\r\n            })\r\n        }\r\n        catch (ex) {\r\n            console.error(`[tfw.gesture.basic-handler] window.mousemove`, ex)\r\n            console.error(\"    handler=\", handleMove)\r\n            console.error(\"    event=\", event)\r\n        }\r\n    }\r\n}, false);\r\n\r\nwindow.addEventListener(\"mouseup\", (event: MouseEvent) => {\r\n    for (const movingElem of movingElements) {\r\n        if (event.cancelBubble) continue;\r\n        const { target, handleUp, x, y, index } = movingElem;\r\n        if (typeof handleUp !== 'function') continue;\r\n        try {\r\n            handleUp({\r\n                x: event.clientX - x,\r\n                y: event.clientY - y,\r\n                index,\r\n                event,\r\n                pointer: \"mouse\",\r\n                buttons: translateButtons(event),\r\n                target,\r\n                clear: createClear(event)\r\n            })\r\n        }\r\n        catch (ex) {\r\n            console.error(`[tfw.gesture.basic-handler] window.mouseup`, ex)\r\n            console.error(\"    handler=\", handleUp)\r\n            console.error(\"    event=\", event)\r\n        }\r\n    }\r\n    movingElements.splice(0, movingElements.length)\r\n}, false);\r\n\r\n\r\n\r\n\r\ntype TTouchEventHandler = (evt: TouchEvent) => void;\r\n\r\ntype TMouseEventHandler = (evt: MouseEvent) => void;\r\n\r\ntype TBasicHandler = (evt: IBasicEvent) => void | undefined;\r\n\r\ninterface IDeviceHandlers {\r\n    touchstart?: TTouchEventHandler;\r\n    touchend?: TTouchEventHandler;\r\n    touchmove?: TTouchEventHandler;\r\n    mousedown?: TMouseEventHandler;\r\n    mouseup?: TMouseEventHandler;\r\n    mousemove?: TMouseEventHandler;\r\n    mouseout?: TMouseEventHandler;\r\n}\r\n\r\nexport default class BasicHandler {\r\n    readonly element: HTMLElement;\r\n    mouseType: string = \"\";\r\n    mouseTypeTime: number = 0;\r\n    deviceHandlers: IDeviceHandlers = {};\r\n    fingers: Finger = new Finger();\r\n    pressed: boolean = false;\r\n\r\n    constructor(element: HTMLElement,\r\n                handleDown: TBasicHandler,\r\n                handleUp: TBasicHandler,\r\n                handleMove: TBasicHandler) {\r\n        this.element = element;\r\n        attachDownEvent.call(this, handleDown, handleUp, handleMove);\r\n        attachUpEventTouch.call(this, handleDown, handleUp, handleMove);\r\n    }\r\n\r\n    /**\r\n     * If you device can hold mouse and touch events, you will receive two events.\r\n     * This function prevent it.\r\n     *\r\n     * @param   mouseType\r\n     * @returns If `false`, we must ignore this event.\r\n     */\r\n    checkMouseType(mouseType: string): boolean {\r\n        const now = Date.now();\r\n        const delay = now - this.mouseTypeTime;\r\n        this.mouseTypeTime = now;\r\n        if (this.mouseType.length === 0 || delay > 500) {\r\n            // If the user waits more than 500ms, he can change of mouse.\r\n            this.mouseType = mouseType;\r\n            return true;\r\n        }\r\n        return this.mouseType === mouseType;\r\n    }\r\n\r\n    detachEvents() {\r\n        const element = this.element;\r\n        const { touchstart, touchend, mousedown } = this.deviceHandlers;\r\n\r\n        if (touchstart) element.removeEventListener(\"touchstart\", touchstart, false);\r\n        if (touchend) element.removeEventListener(\"touchend\", touchend, false);\r\n        if (mousedown) element.removeEventListener(\"mousedown\", mousedown, false);\r\n    }\r\n}\r\n\r\n\r\nfunction attachDownEvent(this: BasicHandler,\r\n                         handleDown: TBasicHandler,\r\n                         handleUp: TBasicHandler,\r\n                         handleMove: TBasicHandler) {\r\n    attachDownEventTouch.call(this, handleDown, handleUp, handleMove);\r\n    attachDownEventMouse.call(this, handleDown, handleUp, handleMove);\r\n}\r\n\r\n\r\nfunction attachDownEventTouch(this: BasicHandler,\r\n                              handleDown: TBasicHandler,\r\n                              handleUp: TBasicHandler,\r\n                              handleMove: TBasicHandler) {\r\n    const { element, deviceHandlers } = this;\r\n    const handler = (event: TouchEvent) => {\r\n        if (!this.checkMouseType(\"touch\")) return;\r\n        const rect = element.getBoundingClientRect();\r\n        for (const touch of event.changedTouches) {\r\n            const index = this.fingers.getIndex(touch.identifier)\r\n            const x = touch.clientX - rect.left;\r\n            const y = touch.clientY - rect.top;\r\n            handleDown({\r\n                x,\r\n                y,\r\n                index,\r\n                event,\r\n                buttons: 1,\r\n                pointer: \"touch\",\r\n                target: element,\r\n                clear: createClear(event)\r\n            });\r\n            movingElements.push({\r\n                handleUp, handleMove, index,\r\n                target: element,\r\n                x,\r\n                y\r\n            })\r\n        }\r\n    };\r\n    deviceHandlers.touchstart = handler;\r\n    element.addEventListener(\"touchstart\", handler, false);\r\n}\r\n\r\n\r\nfunction attachUpEventTouch(this: BasicHandler,\r\n                            handleDown: TBasicHandler,\r\n                            handleUp: TBasicHandler,\r\n                            handleMove: TBasicHandler) {\r\n    const { element, deviceHandlers } = this;\r\n    const handler = (event: TouchEvent) => {\r\n        if (!this.checkMouseType(\"touch\")) return;\r\n        const rect = element.getBoundingClientRect();\r\n        for (const touch of event.changedTouches) {\r\n            const index = this.fingers.getIndex(touch.identifier)\r\n            const x = touch.clientX - rect.left;\r\n            const y = touch.clientY - rect.top;\r\n            handleUp({\r\n                x,\r\n                y,\r\n                index,\r\n                event,\r\n                buttons: 1,\r\n                pointer: \"touch\",\r\n                target: element,\r\n                clear: createClear(event)\r\n            });\r\n        }\r\n        movingElements.splice(0, movingElements.length)\r\n    };\r\n    deviceHandlers.touchend = handler;\r\n    element.addEventListener(\"touchend\", handler, false);\r\n}\r\n\r\n\r\nfunction attachDownEventMouse(this: BasicHandler,\r\n                              handleDown: TBasicHandler,\r\n                              handleUp: TBasicHandler,\r\n                              handleMove: TBasicHandler) {\r\n    const { element, deviceHandlers } = this;\r\n    const handler = (event: MouseEvent) => {\r\n        if (!this.checkMouseType(\"mouse\")) return;\r\n        const rect = element.getBoundingClientRect();\r\n        this.pressed = true;\r\n        const x = event.clientX - rect.left;\r\n        const y = event.clientY - rect.top;\r\n        if (typeof handleDown === 'function') {\r\n            handleDown({\r\n                x,\r\n                y,\r\n                index: 0,\r\n                buttons: translateButtons(event),\r\n                pointer: \"mouse\",\r\n                event,\r\n                target: element,\r\n                clear: createClear(event)\r\n            });\r\n        }\r\n        movingElements.push({\r\n            handleUp, handleMove,\r\n            index: 0,\r\n            target: element,\r\n            x: rect.left,\r\n            y: rect.top\r\n        })\r\n    };\r\n    deviceHandlers.mousedown = handler;\r\n    element.addEventListener(\"mousedown\", handler, false);\r\n}\r\n\r\n\r\nfunction createClear(evt: MouseEvent | TouchEvent) {\r\n    return () => {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n    }\r\n}\r\n\r\n/**\r\n * Some mouses have only one button (on Mac, for instance).\r\n * So we will emulate the other buttons by looking at Ctrl and Meta keys.\r\n */\r\nfunction translateButtons(event: MouseEvent): number {\r\n    const { buttons, metaKey, ctrlKey } = event;\r\n    if (buttons !== 1) return buttons;\r\n    if (metaKey && !ctrlKey) return 2;\r\n    if (!metaKey && ctrlKey) return 4;\r\n    return buttons;\r\n}\r\n","/**\n * Here is the list of all parameters used if all the handlers.\n * * x, y: coord relative to the upper-left corner of the element.\n *\n * tap({ x: number, y: number, index: number })\n *\n */\n\nimport Moves from \"./moves\"\nimport BasicHandler from \"./basic-handler\"\nimport { IBasicEvent } from \"./basic-handler.types\"\nimport { IEvent, IWheelEvent } from \"./types\"\n\nconst SYMBOL = Symbol(\"gesture\");\n\nlet ID = 0;\n\nexport interface IHTMLElementWithGesture extends HTMLElement {\n    // A special attribute to attach Gesture object.\n    [SYMBOL]?: Gesture\n}\n\ntype THandlers = {\n    tap?: (event: IEvent) => void;\n    down?: (event: IEvent) => void;\n    up?: (event: IEvent) => void;\n    pan?: (event: IEvent) => void;\n    pandown?: (event: IEvent) => void;\n    panup?: (event: IEvent) => void;\n    panvertical?: (event: IEvent) => void;\n    swipe?: (event: IEvent) => void;\n    swipedown?: (event: IEvent) => void;\n    swipeup?: (event: IEvent) => void;\n    swipevertical?: (event: IEvent) => void;\n    swipeleft?: (event: IEvent) => void;\n    keydown?: (event: KeyboardEvent) => void;\n    keyup?: (event: KeyboardEvent) => void;\n    wheel?: (event: IWheelEvent) => void;\n    [key: string]: ((evt: any) => void) | undefined;\n};\n\ninterface IPointer {\n    isDown: boolean;\n    moves: Moves;\n    rect: {\n        left: number;\n        top: number;\n        width: number;\n        height: number;\n    };\n    type?: string | null;\n    time?: number;\n    id?: number;\n}\n\nconst STANDARD_EVENTS = [\"keydown\", \"keyup\", \"wheel\"];\n\nclass Gesture {\n    //private readonly basicHandler: BasicHandler;\n    private handlers: THandlers;\n    private element: IHTMLElementWithGesture;\n    private readonly pointers: IPointer[];\n    private readonly id: number;\n\n    constructor(elem: IHTMLElementWithGesture) {\n        elem[SYMBOL] = this;\n        this.id = ID++;\n        this.element = elem;\n        this.handlers = {};\n        new BasicHandler(\n            elem,\n            this.handleDown.bind(this),\n            this.handleUp.bind(this),\n            this.handleMove.bind(this)\n        );\n        this.pointers = new Array(3);\n        elem.addEventListener(\"contextmenu\", (evt) => { evt.preventDefault() }, false);\n    }\n\n    get identifier() { return this.id; }\n\n    on(handlers: THandlers) {\n        this.handlers = wrapSpecialHandlers(Object.assign(this.handlers, handlers));\n        Object.keys(this.handlers).forEach(eventName => {\n            if (STANDARD_EVENTS.indexOf(eventName) === -1) return;\n            // This is a non-pointer event. (i.e., keyboard, resize, ...)\n            const handler = this.handlers[eventName];\n            if (typeof handler === 'function' ) {\n                this.element.addEventListener(eventName, handler, false);\n            }\n        });\n    }\n\n    /**\n     * Returns true if current gesture has at least one of the provided handlers.\n     */\n    private hasHandlerFor(...names: string[]) {\n        for( const name of names ) {\n            if (this.handlers[name]) return true;\n        }\n        return false;\n    }\n\n    private getPointer(index: number) {\n        const pointers = this.pointers;\n        if (typeof pointers[index] === 'undefined') {\n            pointers[index] = {\n                isDown: false,\n                moves: new Moves(0, 0),\n                rect: { left: 0, top: 0, width: 0, height: 0 }\n            }\n        }\n        return pointers[index];\n    }\n\n    private handleDown(event: IBasicEvent) {\n        // We don't want to deal with more than 3 simultaneous touches.\n        if (event.index > 2) return;\n\n        const { x, y } = event;\n        const { element } = this;\n        const ptr = this.getPointer(event.index);\n        ptr.isDown = true;\n        ptr.moves.init(x, y);\n\n        if (this.handlers.down) {\n            this.handlers.down(Object.assign(event, { x, y, target: element }))\n        }\n    }\n\n    private handleUp(event: IBasicEvent) {\n        // We want not deal with more than 3 simultaneous touches.\n        if (event.index > 2) return;\n\n        const { x, y } = event;\n        const ptr = this.getPointer(event.index);\n        ptr.isDown = false;\n        ptr.moves.add(x, y);\n\n        if (this.handlers.up) {\n            this.handlers.up(Object.assign(event, { x, y, target: this.element }));\n        }\n        this.recognizeTap(event, ptr);\n        this.recognizeSwipe(event, ptr);\n    }\n\n    private handleMove(event: IBasicEvent) {\n        // We want not deal with more than 3 simultaneous touches.\n        if (event.index > 2) return;\n\n        const ptr = this.getPointer(event.index);\n        const { x, y } = event;\n        ptr.moves.add(x, y);\n        this.recognizePan(event, ptr);\n    }\n\n    private recognizeTap(evt: IBasicEvent, ptr: IPointer) {\n        // A tap is recognized only if there is less than 400ms\n        // between down and up, and if the pointer has not moves more\n        // than 16px.\n        if (!this.handlers.tap || ptr.moves.elapsedTime > 400) return;\n        const moves = ptr.moves;\n        const dx = Math.abs(moves.x - moves.startX);\n        if (dx > 16) return;\n        const dy = Math.abs(moves.y - moves.startY);\n        if (dy > 16) return;\n\n        evt.clear();\n        this.handlers.tap({ ...evt, x: moves.x, y: moves.y, target: this.element });\n    }\n\n    private recognizePan(evt: IBasicEvent, ptr: IPointer) {\n        if (!ptr.isDown) return;\n        this.recognizePanDown(evt, ptr);\n        this.recognizePanUp(evt, ptr);\n        if (this.handlers.pan) {\n            const { x, y, startX, startY } = ptr.moves;\n            this.handlers.pan(\n                { ...evt, x, y, startX, startY, target: this.element });\n        }\n    }\n\n    private recognizePanDown(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"pandown\", \"panvertical\")) return;\n\n        // Check that we are panning down.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.y - moves.startY;\n        if (dy < dx) return;\n\n        if (this.handlers.pandown) {\n            this.handlers.pandown(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n        if (this.handlers.panvertical) {\n            this.handlers.panvertical(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n    }\n\n    private recognizePanUp(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"panup\", \"panvertical\")) return;\n\n        // Check that we are panning up.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = -moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.startY - moves.y;\n        if (dy < dx) return;\n\n        if (this.handlers.panup) {\n            this.handlers.panup(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n        if (this.handlers.panvertical) {\n            this.handlers.panvertical(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n    }\n\n    private recognizeSwipe(evt: IBasicEvent, ptr: IPointer) {\n        this.recognizeSwipeDown(evt, ptr);\n        this.recognizeSwipeUp(evt, ptr);\n        this.recognizeSwipeLeft(evt, ptr);\n        if (this.handlers.swipe) {\n            const { x, y, startX, startY } = ptr.moves;\n            this.handlers.swipe({ ...evt, x, y, startX, startY, target: this.element });\n        }\n    }\n\n    private recognizeSwipeDown(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"swipedown\", \"swipevertical\")) return;\n\n        // Check that we are panning down.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.y - moves.startY;\n        if (dy < dx) return;\n        // Minimal speed for swipe: 100 pixels/second.\n        const speed = dy / moves.elapsedTime;\n        if (speed < 0.1) return;\n        if (this.handlers.swipedown) {\n            this.handlers.swipedown(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n        if (this.handlers.swipevertical) {\n            this.handlers.swipevertical(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n    }\n\n    private recognizeSwipeUp(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"swipeup\", \"swipevertical\")) return;\n\n        // Check that we are panning up.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.y - moves.startY;\n        if (dy < dx) return;\n        // Minimal speed for swipe: 100 pixels/second.\n        const speed = dy / moves.elapsedTime;\n        if (speed < 0.1) return;\n        if (this.handlers.swipeup) {\n            this.handlers.swipeup({ ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n        if (this.handlers.swipevertical) {\n            this.handlers.swipevertical(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n    }\n\n    private recognizeSwipeLeft(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"swipeleft\", \"swipehorizontal\")) return;\n\n        // Check that we are panning left.\n        const moves = ptr.moves;\n        const sx = -moves.speedX;\n        const sy = Math.abs(moves.speedY);\n        if (sx < sy) return;\n        // Check that the final point is beneath the initial one.\n        const dx = moves.startX - moves.x;\n        const dy = Math.abs(moves.y - moves.startY);\n        if (dx < dy) return;\n        // Minimal speed for swipe: 100 pixels/second.\n        const speed = dx / moves.elapsedTime;\n        if (speed < 0.1) return;\n        if (this.handlers.swipeleft) {\n            this.handlers.swipeleft(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n        if (this.handlers.swipehorizontal) {\n            this.handlers.swipehorizontal(\n                { ...evt, x: moves.x, y: moves.y, target: this.element });\n        }\n    }\n}\n\nexport default function(elem: IHTMLElementWithGesture): Gesture {\n    let gesture = elem[SYMBOL];\n    if( gesture ) return gesture;\n    gesture = new Gesture(elem);\n    elem[SYMBOL] = gesture;\n    return gesture;\n}\n\n\n/**\n * Somw event (like \"wheel\") need their handler to be wrapped in order to\n * map the event is something else.\n */\nfunction wrapSpecialHandlers(rawHandlers: THandlers): THandlers {\n    const handlers: THandlers = {};\n    for( const eventName of Object.keys(rawHandlers) ) {\n        if (eventName === 'wheel') {\n            handlers.wheel = (evt: WheelEvent) => {\n                rawHandlers.wheel({\n                    deltaX: evt.deltaX,\n                    deltaY: evt.deltaY,\n                    deltaZ: evt.deltaZ,\n                    x: 0,\n                    y: 0\n                });\n            }\n            continue;\n        }\n        handlers[eventName] = rawHandlers[eventName];\n    }\n    return handlers;\n}\n","/**\r\n * @class Color\r\n * Fast color manipulations.\r\n * Attributes R  (red), G  (green), B  (blue), A  (alpha), H  (hue), S\r\n * (saturation), and L (luminance) are all floats between 0 and 1.\r\n */\r\nexport default class Color {\r\n    public R: number;\r\n    public G: number;\r\n    public B: number;\r\n    public H: number;\r\n    public S: number;\r\n    public L: number;\r\n    public A: number;\r\n\r\n    constructor(codeCSS: string = \"#000000\") {\r\n        this.R = 0;\r\n        this.G = 0;\r\n        this.B = 0;\r\n        this.H = 0;\r\n        this.S = 0;\r\n        this.L = 0;\r\n        this.A = 1;\r\n\r\n        this.parse(codeCSS);\r\n    }\r\n\r\n    static isValid(codeCSS: string) {\r\n        if( typeof codeCSS !== 'string' ) return false;\r\n        if( codeCSS.charAt(0) !== '#' ) return false;\r\n        switch( codeCSS.length ) {\r\n            case 4:  // #RGB\r\n            case 5:  // #RGBA\r\n            case 7:  // #RRGGBB\r\n            case 9:  // #RRGGBBAA\r\n                return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    static normalize(codeCSS: string) {\r\n        const color = new Color(codeCSS);\r\n        return color.stringify();\r\n    }\r\n\r\n    static luminance(codeCSS: string) {\r\n        const color = new Color(codeCSS);\r\n        return color.luminance();\r\n    }\r\n\r\n    /**\r\n     * Returns 1 for bright colors and 0 for dark colors.\r\n     */\r\n    static luminanceStep(codeCSS: string) {\r\n        const color = new Color(codeCSS);\r\n        return color.luminanceStep();\r\n    }\r\n\r\n    static mix(color1: Color, color2: Color, alpha: number=.5) {\r\n        const beta = 1 - alpha;\r\n        return Color.newRGBA(\r\n            alpha * color2.R + beta * color1.R,\r\n            alpha * color2.G + beta * color1.G,\r\n            alpha * color2.B + beta * color1.B,\r\n            alpha * color2.A + beta * color1.A\r\n        );\r\n    }\r\n\r\n    static newBlack() {\r\n        return Color.newRGB(0, 0, 0);\r\n    }\r\n\r\n    static newWhite() {\r\n        return Color.newRGB(1, 1, 1);\r\n    }\r\n\r\n    /**\r\n     * Create a new Color instance base on R,G,B channels.\r\n     *\r\n     * @param   {number} red - Value between 0 and 1.\r\n     * @param   {number} green - Value between 0 and 1.\r\n     * @param   {number} blue - Value between 0 and 1.\r\n     * @returns {Color} New instance of Color.\r\n     */\r\n    static newRGB(red: number, green: number, blue: number) {\r\n        const color = new Color();\r\n        color.R = red;\r\n        color.G = green;\r\n        color.B = blue;\r\n        color.A = 1;\r\n        return color;\r\n    }\r\n\r\n    /**\r\n     * Create a new Color instance base on R,G,B,A channels.\r\n     *\r\n     * @param   {number} red - Value between 0 and 1.\r\n     * @param   {number} green - Value between 0 and 1.\r\n     * @param   {number} blue - Value between 0 and 1.\r\n     * @param   {number} alpha - Value between 0 and 1.\r\n     * @returns {Color} New instance of Color.\r\n     */\r\n    static newRGBA(red: number, green: number, blue: number, alpha: number) {\r\n        const color = new Color();\r\n        color.R = red;\r\n        color.G = green;\r\n        color.B = blue;\r\n        color.A = alpha;\r\n        return color;\r\n    }\r\n\r\n    /**\r\n     * Parse a color writtent in CSS syntax.\r\n     *\r\n     * @param   {string} code - CSS color.\r\n     * @returns {boolean} `true` if the color has valid syntax.\r\n     */\r\n    parse(code: string = \"#000000\"): boolean {\r\n        const input = code.trim().toUpperCase();\r\n        if (this.parseHexa.call(this, input)) return true;\r\n        if (this.parseRGB.call(this, input)) return true;\r\n        if (this.parseRGBA.call(this, input)) return true;\r\n        if (this.parseHSL.call(this, input)) return true;\r\n        // @TODO parseHSLA.\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * @see https://en.wikipedia.org/wiki/Grayscale\r\n     * @this Color\r\n     * @returns {undefined}\r\n     */\r\n    luminance(): number {\r\n        return (0.2126 * this.R) + (0.7152 * this.G) + (0.0722 * this.B);\r\n    }\r\n\r\n    /**\r\n     * @returns {integer} 0 if the color is dark and 1 if it is light.\r\n     */\r\n    luminanceStep(): number {\r\n        return this.luminance() < .6 ? 0 : 1;\r\n    }\r\n\r\n    /**\r\n     * @this Color\r\n     * @returns {string} String value of the color. `#fd45a7`.\r\n     */\r\n    stringify() {\r\n        let color = hexa2(this.R * 255) + hexa2(this.G * 255) + hexa2(this.B * 255);\r\n        if (this.A < 1) {\r\n            color += hexa2(this.A * 255);\r\n        }\r\n        return `#${color}`;\r\n    }\r\n\r\n    copy() {\r\n        const newColor = new Color();\r\n        newColor.R = this.R;\r\n        newColor.G = this.G;\r\n        newColor.B = this.B;\r\n        newColor.A = this.A;\r\n        newColor.H = this.H;\r\n        newColor.S = this.S;\r\n        newColor.L = this.L;\r\n        return newColor;\r\n    }\r\n\r\n    /**\r\n         * @see https://en.wikipedia.org/wiki/HSL_and_HSV#Converting_to_RGB\r\n         * @this Color\r\n         * @returns {undefined}\r\n         */\r\n    hsl2rgb() {\r\n        const\r\n            H = 6 * this.H,\r\n            S = this.S,\r\n            L = this.L,\r\n            chroma = (1 - Math.abs(2 * L - 1)) * S,\r\n            x = chroma * (1 - Math.abs(H % 2 - 1));\r\n\r\n        let R = 0, G = 0, B = 0;\r\n\r\n        if (H < 3) {\r\n            if (H < 1) {\r\n                R = chroma; G = x; B = 0;\r\n            } else if (H < 2) {\r\n                R = x; G = chroma; B = 0;\r\n            } else {\r\n                // H == 2.\r\n                R = 0; G = chroma; B = x;\r\n            }\r\n        } else if (H < 4) {\r\n            R = 0; G = x; B = chroma;\r\n        } else if (H < 5) {\r\n            R = x; G = 0; B = chroma;\r\n        } else {\r\n            R = chroma; G = 0; B = x;\r\n        }\r\n\r\n        const shift = L - chroma * 0.5;\r\n        this.R = R + shift;\r\n        this.G = G + shift;\r\n        this.B = B + shift;\r\n    }\r\n\r\n    rgb2hsl() {\r\n        const R = this.R;\r\n        const G = this.G;\r\n        const B = this.B;\r\n\r\n        const min = Math.min(R, G, B);\r\n        const max = Math.max(R, G, B);\r\n        const delta = max - min;\r\n\r\n        this.L = 0.5 * (max + min);\r\n\r\n        if (delta < 0.000001) {\r\n            this.H = 0;\r\n            this.S = 0;\r\n        }\r\n        else {\r\n            this.S = delta / (1 - Math.abs(2 * this.L - 1));\r\n            if (max === R) {\r\n                if (G >= B) {\r\n                    this.H = INV6 * ((G - B) / delta);\r\n                } else {\r\n                    this.H = 1 - INV6 * ((B - G) / delta);\r\n                }\r\n            }\r\n            else if (max === G) {\r\n                this.H = INV6 * (2 + (B - R) / delta);\r\n            }\r\n            else {\r\n                this.H = INV6 * (4 + (R - G) / delta);\r\n            }\r\n        }\r\n    }\r\n\r\n    private parseHexa(text: string) {\r\n        if (text.charAt(0) !== '#') return false;\r\n        let R = 0, G = 0, B = 0, A = 1;\r\n\r\n        switch (text.length) {\r\n            case 4:\r\n                R = parseInt(text.charAt(1), 16) * INV15;\r\n                G = parseInt(text.charAt(2), 16) * INV15;\r\n                B = parseInt(text.charAt(3), 16) * INV15;\r\n                break;\r\n            case 5:\r\n                R = parseInt(text.charAt(1), 16) * INV15;\r\n                G = parseInt(text.charAt(2), 16) * INV15;\r\n                B = parseInt(text.charAt(3), 16) * INV15;\r\n                A = parseInt(text.charAt(4), 16) * INV15;\r\n                break;\r\n            case 7:\r\n                R = parseInt(text.substr(1, 2), 16) * INV255;\r\n                G = parseInt(text.substr(3, 2), 16) * INV255;\r\n                B = parseInt(text.substr(5, 2), 16) * INV255;\r\n                break;\r\n            case 9:\r\n                R = parseInt(text.substr(1, 2), 16) * INV255;\r\n                G = parseInt(text.substr(3, 2), 16) * INV255;\r\n                B = parseInt(text.substr(5, 2), 16) * INV255;\r\n                A = parseInt(text.substr(7, 2), 16) * INV255;\r\n                break;\r\n            default:\r\n        }\r\n\r\n        if (isNaN(R) || isNaN(G) || isNaN(B) || isNaN(A)) {\r\n            this.R = this.G = this.B = this.A = 0;\r\n        } else {\r\n            this.R = R;\r\n            this.G = G;\r\n            this.B = B;\r\n            this.A = A;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @param   {string} text - `rgb(200, 140, 50)`\r\n     * @returns {boolean} `true` if `text` is a valid `rgb()` syntax.\r\n     */\r\n    private parseRGB(text: string) {\r\n        const m = RX_RGB.exec(text);\r\n        if (!m) return false;\r\n        this.R = clamp01(parseInt(m[1], 10) * INV255);\r\n        this.G = clamp01(parseInt(m[2], 10) * INV255);\r\n        this.B = clamp01(parseInt(m[3], 10) * INV255);\r\n        this.A = 1;\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @param   {string} text - `rgba(200, 140, 50, 0.5)`\r\n     * @returns {boolean} `true` if `text` is a valid `rgba()` syntax.\r\n     */\r\n    private parseRGBA(text: string) {\r\n        const m = RX_RGBA.exec(text);\r\n        if (!m) return false;\r\n        this.R = clamp01(parseInt(m[1], 10) * INV255);\r\n        this.G = clamp01(parseInt(m[2], 10) * INV255);\r\n        this.B = clamp01(parseInt(m[3], 10) * INV255);\r\n        this.A = clamp01(parseFloat(m[4]));\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @param   {string} text - `hsl(200, 140, 50)`\r\n     * @returns {boolean} `true` if `text` is a valid `hsl()` syntax.\r\n     */\r\n    private parseHSL(text: string) {\r\n        const m = RX_HSL.exec(text);\r\n        if (!m) return false;\r\n        this.H = clamp01(parseInt(m[1], 10) * INV359);\r\n        this.S = clamp01(parseInt(m[2], 10) * INV99);\r\n        this.L = clamp01(parseInt(m[3], 10) * INV99);\r\n        this.A = 1;\r\n        this.hsl2rgb();\r\n        return true;\r\n    }\r\n}\r\n\r\nconst\r\n    INV6 = 1 / 6,\r\n    INV15 = 1 / 15,\r\n    INV99 = 1 / 99,\r\n    INV255 = 1 / 255,\r\n    INV359 = 1 / 359;\r\n\r\nconst RX_RGB = /^RGB[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\r\nconst RX_RGBA = /^RGBA[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)[^0-9.]+([0-9.]+)/;\r\nconst RX_HSL = /^HSL[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\r\n\r\nfunction clamp01(value: number): number {\r\n    if (value < 0) return 0;\r\n    if (value > 1) return 1;\r\n    return value;\r\n}\r\n\r\nfunction hexa2(value: number) {\r\n    let out = Math.floor(value).toString(16);\r\n    if (out.length < 2) out = \"0\" + out;\r\n    return out;\r\n}\r\n","import \"./theme.css\"\nimport Color from \"./color\"\n\n/**\n * Manage CSS styles.\n */\nexport default {\n    register: registerTheme,\n    apply: applyTheme,\n    get: getTheme,\n    bg0: makeGetCurrentColor(\"bg0\"),\n    bg1: makeGetCurrentColor(\"bg1\"),\n    bg2: makeGetCurrentColor(\"bg2\"),\n    bg3: makeGetCurrentColor(\"bg3\"),\n    bgP: makeGetCurrentColor(\"bgP\"),\n    bgPD: makeGetCurrentColor(\"bgPD\"),\n    bgPL: makeGetCurrentColor(\"bgPL\"),\n    bgS: makeGetCurrentColor(\"bgS\"),\n    bgSD: makeGetCurrentColor(\"bgSD\"),\n    bgSL: makeGetCurrentColor(\"bgSL\"),\n    black: makeGetCurrentColor(\"black\"),\n    white: makeGetCurrentColor(\"white\"),\n    isDark,\n    setFontSize,\n    normalize: completeWithDefaultValues\n};\n\ninterface IStyle {\n    bg0?: string;\n    bg1?: string;\n    bg2?: string;\n    bg3?: string;\n    bgP?: string;\n    bgPD?: string;\n    bgPL?: string;\n    bgS?: string;\n    bgSD?: string;\n    bgSL?: string;\n    fg0?: string;\n    fg1?: string;\n    fg2?: string;\n    fg3?: string;\n    fgP?: string;\n    fgPD?: string;\n    fgPL?: string;\n    fgS?: string;\n    fgSD?: string;\n    fgSL?: string;\n    black?: string;\n    white?: string;\n    [key: string]: string | undefined;\n};\n\ninterface ITheme {\n    bg0: string,\n    bg1: string,\n    bg2: string,\n    bg3: string,\n    bgP: string,\n    bgPL: string,\n    bgPD: string,\n    bgS: string,\n    bgSL: string,\n    bgSD: string,\n    black: string,\n    white: string\n}\n\n\n//################################################################################\n\ninterface IThemes {\n    css: { [name: string]: HTMLStyleElement };\n    vars: { [name: string]: IStyle }\n    current: string | null;\n}\n\n// Used for luminance computations. Because we need to know which text color\n// can be used based on the background's luminance.\nconst COLOR = new Color();\n\nconst THEME_COLOR_NAMES = [\"0\", \"1\", \"2\", \"3\", \"P\", \"PD\", \"PL\", \"S\", \"SD\", \"SL\"];\nconst THEMES: IThemes = {\n    css: {},\n    vars: {},\n    current: null\n};\n\nfunction registerTheme(themeName: string, _style: IStyle) {\n    const style = completeWithDefaultValues(_style);\n    THEMES.vars[themeName] = style;\n\n    let codeCSS = codeVariables(themeName, style);\n    codeCSS += codeBackground(themeName, style);\n    codeCSS += codeElevation(themeName, style);\n    codeCSS += codeText(themeName, style);\n\n    let styleElement = THEMES.css[themeName];\n    if (!styleElement) {\n        styleElement = document.createElement(\"style\");\n        document.getElementsByTagName('head')[0].appendChild(styleElement);\n        THEMES.css[themeName] = styleElement;\n    }\n\n    styleElement.textContent = codeCSS;\n}\n\nfunction codeText(themeName: string, style: IStyle) {\n    let codeCSS = '';\n    for (let depth = 1; depth <= 10; depth++) {\n        for (const colorName of THEME_COLOR_NAMES) {\n            const fgColorName = `fg${colorName}`;\n            const bgColorName = `bg${colorName}`;\n            const styleFgColorName: string = style[fgColorName] as string;\n            const styleBgColorName: string = style[bgColorName] as string;\n            const bgClass = \".thm-bg\" + colorName;\n            const fgClass = \".thm-fg\" + colorName;\n            for (let position = 1; position <= depth; position++) {\n                const piecesFG = [];\n                const piecesSVG = [];\n                const piecesBG = [];\n                for (let index = 1; index <= depth; index++) {\n                    piecesBG.push(position === index ? bgClass : '*');\n                    piecesSVG.push(position === index ? bgClass : '*');\n                    piecesFG.push(position === index ? fgClass : '*');\n                    if (index === depth) {\n                        piecesBG.push(piecesBG.pop() + \".thm-fg\");\n                        piecesFG.push(piecesFG.pop() + fgClass);\n                    }\n                }\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesBG.join(\" > \")\n                    + \" { color: \" + styleFgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + removeTail(piecesBG.join(\" > \"), \".thm-fg\")\n                    + \" { color: \" + styleFgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesFG.join(\" > \")\n                    + \" { color: \" + styleBgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesSVG.join(\" > \")\n                    + \" .thm-svg-fill0\"\n                    + \" { fill: \" + styleFgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesSVG.join(\" > \")\n                    + \" .thm-svg-stroke0\"\n                    + \" { stroke: \" + styleFgColorName + \" }\\n\";\n            }\n        }\n    }\n    return codeCSS;\n}\n\nconst ALPHA_HEXA = \"123456789ABCDE\";\nfunction codeVariables(themeName: string, style: IStyle) {\n    let codeCSS = \"body.dom-theme-\" + themeName + '{\\n';\n    THEME_COLOR_NAMES.forEach(function(colorName) {\n        const s = style[`bg${colorName}`] as string;\n        codeCSS += `  --thm-bg${colorName}: ${s};\\n`;\n        for (const a of ALPHA_HEXA) {\n            codeCSS += `  --thm-bg${colorName}-${a}: ${s}${a}${a};\\n`;\n        }\n        COLOR.parse(s);\n        const pen = COLOR.luminanceStep() ? style.black : style.white;\n        codeCSS += `  --thm-fg${colorName}: ${pen};\\n`;\n        for (const a of ALPHA_HEXA) {\n            codeCSS += `  --thm-fg${colorName}-${a}: ${pen}${a}${a};\\n`;\n        }\n    });\n    style.white = normalize(style.white);\n    style.black = normalize(style.black);\n    codeCSS += `  --thm-white: ${style.white};\\n`;\n    codeCSS += `  --thm-black: ${style.black};\\n`;\n    for (const letter of ALPHA_HEXA) {\n        codeCSS += `  --thm-white-${letter}: ${style.white}${letter}${letter};\\n`;\n        codeCSS += `  --thm-black-${letter}: ${style.black}${letter}${letter};\\n`;\n    }\n    codeCSS += \"}\\n\";\n    return codeCSS;\n}\n\n\nfunction codeBackground(themeName: string, style: IStyle) {\n    var codeCSS = '';\n    THEME_COLOR_NAMES.forEach(function(colorName) {\n        codeCSS += \"body.dom-theme-\" + themeName + \".thm-bg\" + colorName\n            + \" { background-color: \" + style[`bg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-fg\" + colorName\n            + \" { color: \" + style[`fg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName\n            + \" { background-color: \" + style[`bg${colorName}`] + \" }\\n\";\n        codeCSS += `body.dom-theme-${themeName} .thm-bg${colorName}-text`\n            + \" { background-color: \" + style[`fg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-bottom\"\n            + \" { background: linear-gradient(to top,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-top\"\n            + \" { background: linear-gradient(to bottom,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-left\"\n            + \" { background: linear-gradient(to right,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-right\"\n            + \" { background: linear-gradient(to left,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n\n        if (!isNaN(parseInt(colorName))) return;\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-svg-fill\" + colorName\n            + \" { fill: \"\n            + style[`bg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-svg-stroke\" + colorName\n            + \" { stroke: \"\n            + style[`bg${colorName}`] + \" }\\n\";\n    });\n    return codeCSS;\n}\n\nconst ELEVATIONS: { [ele: string]: string[] } = {\n    \"0\": [\"none\"],\n    \"2\": [\"button\", \"card\"],\n    \"4\": [\"bar\"],\n    \"6\": [\"floating\"],\n    \"8\": [\"button:active\", \"button-raised\", \"card-raised\"],\n    \"9\": [\"sunmenu-0\"],\n    \"10\": [\"sunmenu-1\"],\n    \"11\": [\"sunmenu-2\"],\n    \"12\": [\"floating:active\"],\n    \"16\": [\"nav\"],\n    \"24\": [\"dialog\"]\n};\nfunction codeElevation(themeName: string, style: IStyle) {\n    COLOR.parse(style.bg2);\n    const luminance = COLOR.luminance();\n    var elevationColor = luminance < .6\n        ? addAlpha(style.white, 4)\n        : addAlpha(style.black, 6);\n    var codeCSS = '';\n    const elevationKeys = Object.keys(ELEVATIONS);\n    elevationKeys.forEach(function(elevationKey) {\n        const elevation = parseInt(elevationKey, 10);\n        ELEVATIONS[elevationKey].forEach(name => {\n            codeCSS += `body.dom-theme-${themeName} .thm-ele-${name} {\n  box-shadow: 0 ${elevation}px ${2 * elevation}px ${elevationColor}\n}\\n`;\n        })\n    });\n    return codeCSS;\n}\n\nfunction applyTheme(name: string, target: HTMLElement = document.body) {\n    if (!THEMES.css[name]) {\n        console.error(\"This theme has not been registered: \", name);\n        return;\n    }\n    var body = document.body;\n    if (typeof THEMES.current === 'string') {\n        body.classList.remove(`dom-theme-${THEMES.current}`);\n    }\n    THEMES.current = name;\n    body.classList.add(`dom-theme-${THEMES.current}`);\n}\n\nfunction getTheme(name: string = \"default\"): ITheme {\n    return THEMES.vars[name] as ITheme;\n}\n\nfunction completeBackgrounds(style: IStyle) {\n    let has0 = typeof style.bg0 === 'string';\n    const has1 = typeof style.bg1 === 'string';\n    const has2 = typeof style.bg2 === 'string';\n    let has3 = typeof style.bg3 === 'string';\n\n    if (has0 && has1 && has2 && has3) return\n\n    if (!has0 && !has1 && !has2 && !has3) {\n        style.bg0 = \"#E0E0E0\";\n        style.bg1 = \"#F5F5F5\";\n        style.bg2 = \"#FAFAFA\";\n        style.bg3 = \"#FFF\";\n        return;\n    }\n    if (has0 && !has1 && !has2 && !has3) {\n        style.bg3 = lightenBackground(style.bg0 as string);\n        has3 = true;\n    }\n    if (!has0 && !has1 && !has2 && has3) {\n        style.bg0 = darkenBackground(style.bg3 as string);\n        has3 = true;\n    }\n    const color0 = new Color(style.bg0);\n    const r0 = color0.R;\n    const g0 = color0.G;\n    const b0 = color0.B;\n    const color3 = new Color(style.bg3);\n    const r3 = color3.R;\n    const g3 = color3.G;\n    const b3 = color3.B;\n    const color1 = Color.newRGB((2 * r0 + r3) / 3, (2 * g0 + g3) / 3, (2 * b0 + b3) / 3);\n    const color2 = Color.newRGB((r0 + 2 * r3) / 3, (g0 + 2 * g3) / 3, (b0 + 2 * b3) / 3);\n    style.bg1 = color1.stringify();\n    style.bg2 = color2.stringify();\n}\n\nfunction completeWithDefaultValues(style: IStyle) {\n    if (typeof style === 'undefined') style = {};\n\n    completeBackgrounds(style);\n\n    if (typeof style.bgP !== 'string') style.bgP = \"#3E50B4\";\n    if (typeof style.bgPD !== 'string') style.bgPD = dark(style.bgP);\n    if (typeof style.bgPL !== 'string') style.bgPL = light(style.bgP);\n    if (typeof style.bgS !== 'string') style.bgS = rotateHue(style.bgP);\n    if (typeof style.bgSD !== 'string') style.bgSD = dark(style.bgS);\n    if (typeof style.bgSL !== 'string') style.bgSL = light(style.bgS);\n\n    if (typeof style.white !== 'string') style.white = '#fff';\n    if (typeof style.black !== 'string') style.black = '#000';\n\n    THEME_COLOR_NAMES.forEach(function(name) {\n        const bg: string = style[`bg${name}`] || '#000';\n        COLOR.parse(bg);\n        var luminance = COLOR.luminance();\n        style[`fg${name}`] = luminance < .6 ? style.white : style.black;\n    });\n\n    return style;\n}\n\nfunction dark(color: string) {\n    const percent = .25;\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L *= 1 - percent;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction darkenBackground(color: string) {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = Math.max(0, COLOR.L - 0.15);\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction light(color: string) {\n    var percent = .4;\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = percent + (1 - percent) * COLOR.L;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction lightenBackground(color: string) {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = Math.min(1, COLOR.L + 0.3);\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction rotateHue(color: string): string {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.H = COLOR.H + .5;\n    if (COLOR.H > 1) COLOR.H--;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\n/**\n * @param {string} color - RGB color in format #xxx or #xxxxxx.\n * @param {string} alpha - Single char between 0 and F.\n */\nfunction addAlpha(color: string, alpha: string) {\n    if (color.length < 5) return color + alpha;\n    return color + alpha + alpha;\n}\n\nfunction removeTail(text: string, tail: string) {\n    return text.substr(0, text.length - tail.length);\n}\n\nfunction isDark(colorName: string = \"\"): boolean {\n    if (colorName === \"\") return isThemeGloballyDark();\n\n    const vars = THEMES.vars[THEMES.current || \"default\"];\n    const varName = `$isDark/${colorName}`;\n    let isDark = vars[varName];\n    if (typeof isDark === 'boolean') return isDark;\n\n    const color = new Color(vars[colorName]);\n    vars[varName] = !color.luminanceStep();\n    return vars[varName];\n}\n\nfunction isThemeGloballyDark(): boolean {\n    const vars = THEMES.vars[THEMES.current || \"default\"];\n    let isDark = vars.$isDark;\n    if (typeof isDark === 'boolean') return isDark;\n\n    const bg0 = new Color(vars.bg0);\n    const bg1 = new Color(vars.bg1);\n    const bg2 = new Color(vars.bg2);\n    const bg3 = new Color(vars.bg3);\n    const average = Color.mix(\n        Color.mix(bg0, bg1),\n        Color.mix(bg2, bg3)\n    );\n    vars.$isDark = !average.luminanceStep();\n    return vars.$isDark;\n}\n\nfunction makeGetCurrentColor(colorName: string): () => string {\n    return () => THEMES.vars[THEMES.current || \"default\"][colorName];\n}\n\nfunction setFontSize(size: \"small\" | \"medium\" | \"large\") {\n    const html = document.documentElement;\n    html.classList.remove(`thm-font-size-small`);\n    html.classList.remove(`thm-font-size-medium`);\n    html.classList.remove(`thm-font-size-large`);\n    html.classList.add(`thm-font-size-${size}`);\n}\n\nfunction normalize(hexa: string): string {\n    const color = new Color(hexa);\n    return color.stringify();\n}\n\nregisterTheme(\"default\", { bgP: \"#1e90ff\" });\n","const EMPTY_FUNCTION = () => { };\r\n\r\ntype TFunction = () => void;\r\n\r\n\r\nexport default function castBoolean(value: any, defaultValue: TFunction = EMPTY_FUNCTION): TFunction {\r\n    if (typeof value === 'function') return value;\r\n    return defaultValue;\r\n}\r\n","import Gesture from \"../gesture\"\nimport Theme from \"../theme\"\nimport castString from \"../converter/string\"\nimport castBoolean from \"../converter/boolean\"\nimport castFunction from \"../converter/function\"\nimport \"./touchable.css\"\n\ninterface IArgs {\n    element?: HTMLElement;\n    enabled?: boolean;\n    color?: string;\n    onTap?: () => void;\n}\n\ninterface IRect {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n}\n\nexport default class Touchable {\n    _element: HTMLElement | undefined;\n    _enabled: boolean = true;\n    color: string = \"#000\";\n    accent: boolean = false;\n    onTap: () => void;\n\n    constructor(args: IArgs) {\n        this.element = args.element;\n        this.enabled = castBoolean(args.enabled, true);\n        this.color = castString(args.color, \"\");\n        this.onTap = castFunction(args.onTap);\n    }\n\n    fire() {\n        if (!this.enabled) return;\n\n        const handler = this.onTap;\n        if (typeof handler === 'function') {\n            handler();\n        }\n    }\n\n    get enabled() { return this._enabled; }\n    set enabled(value: boolean) { this._enabled = value; }\n\n    get element() { return this._element; }\n    set element(element: HTMLElement | undefined) {\n        const that = this;\n        if (typeof element === 'undefined') return;\n        Gesture(element).on({\n            keydown(evt: any) {\n                if (!that.enabled) return;\n\n                const key = evt.key;\n                if (key === \" \" || key === \"Enter\") {\n                    evt.preventDefault();\n                    evt.stopPropagation();\n                    that.fire();\n                }\n            },\n\n            down(evt) {\n                if (!that.enabled) return;\n            },\n\n            tap(evt) {\n                if (!that.enabled) return;\n                that.fire();\n\n                const rect = element.getBoundingClientRect();\n                const style = window.getComputedStyle(element);\n                const screen = createScreen(rect);\n                screen.style.borderRadius = style.getPropertyValue(\"border-radius\");\n                const x = evt.x || 0;\n                const y = evt.y || 0;\n                const w = Math.max(x, rect.width - x);\n                const h = Math.max(y, rect.height - y);\n                const radius = Math.ceil(1.1 * Math.sqrt(w * w + h * h));\n                const ripple = document.createElement(\"div\");\n                screen.appendChild(ripple);\n                ripple.style.left = `${x - radius}px`;\n                ripple.style.top = `${y - radius}px`;\n                ripple.style.width = `${2 * radius}px`;\n                ripple.style.height = `${2 * radius}px`;\n                if (that.color.length > 0) {\n                    ripple.style.background = that.color;\n                } else {\n                    ripple.style.background = Theme.isDark() ? \"#fff\" : \"#000\";\n                }\n                window.setTimeout(() => ripple.className = \"open\");\n                window.setTimeout(() => document.body.removeChild(screen), 500);\n            }\n        })\n    }\n}\n\n\nfunction createScreen(rect: IRect) {\n    const div = document.createElement(\"div\");\n    div.className = \"tfw-behavior-touchable\";\n    div.style.left = `${rect.left}px`;\n    div.style.top = `${rect.top}px`;\n    div.style.width = `${rect.width}px`;\n    div.style.height = `${rect.height}px`;\n    document.body.appendChild(div);\n    return div;\n}\n","import { IIntlText, IIntlOrString } from \"./types\"\r\n\r\ninterface ITranslations {\r\n    [language: string]: { [key: string]: string }\r\n}\r\n\r\nlet gCurrentLanguage: string =\r\n    localStorage.getItem(\"CurrentLanguage\") || navigator.language.split(\"-\")[0];\r\n\r\nexport default class Intl {\r\n    constructor(private translations: ITranslations) { }\r\n\r\n    static make(translations: ITranslations) {\r\n        const instance = new Intl(translations);\r\n        return instance.translate.bind(instance);\r\n    }\r\n\r\n    static toIntl(text: IIntlOrString | undefined, lang: string | null = null): IIntlText {        \r\n        if (!text) return { [lang || Intl.lang]: \"\" };\r\n        if (typeof text !== 'string') return text;\r\n        return { [lang || Intl.lang]: text };\r\n    }\r\n\r\n    static toText(intl: IIntlOrString | undefined, lang?: string | undefined): string {\r\n        if (!intl) return \"\";\r\n        if (typeof intl === 'string') return intl;\r\n        if (typeof lang === 'undefined') lang = Intl.lang;\r\n        const text = intl[lang];\r\n        if (typeof text === 'string') return text;\r\n        const defaultText = intl[Object.keys(intl)[0]];\r\n        if (typeof defaultText === 'string') return defaultText;\r\n        return \"\";\r\n    }\r\n\r\n    static addTextToIntl(lang: string, text: string, intl: IIntlOrString): IIntlText {\r\n        intl = Intl.toIntl(intl, lang);\r\n        intl[lang] = text;\r\n        const result: IIntlText = {};\r\n        for (const key of Object.keys(intl)) {\r\n            const val = intl[key];\r\n            if (val.trim().length === 0) continue;\r\n            result[key] = val;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static get lang() { return gCurrentLanguage; }\r\n\r\n    static set lang(_value: string) {\r\n        if (typeof _value !== 'string') return;\r\n        const value = _value.split(\"-\")[0];\r\n        gCurrentLanguage = value;\r\n        localStorage.setItem(\"CurrentLanguage\", value);\r\n    }\r\n\r\n    translate(item: string, ...params: string[]) {\r\n        try {\r\n            if (this.translations[gCurrentLanguage]) {\r\n                const translation = this.translations[gCurrentLanguage][item];\r\n                if (translation) return addParams(translation, params);\r\n            }\r\n\r\n            // If we don't find a translation in the current language,\r\n            // we look in the other languages.\r\n            const languages = Object.keys(this.translations);\r\n            for (const lang of languages) {\r\n                const vocabulary = this.translations[lang];\r\n                const translation = vocabulary[item];\r\n                if (typeof translation !== 'string') continue;\r\n                return addParams(translation, params);\r\n            }\r\n\r\n            console.error(`Missing translation for item \"${item}\"!`, params);\r\n            return \"\";\r\n        }\r\n        catch (ex) {\r\n            throw Error(`Error while looking for a translation of \"${item}\":\\n${ex}`);\r\n        }\r\n    }\r\n}\r\n\r\n// Used for the states automate in order to parse a translation\r\n// with placeholders.\r\nenum Mode { Text, Escape, Placeholder }\r\n\r\n/**\r\n * In a translation, you can find placeholders for potential params.\r\n * They are marked with a dollar and a digit from 1 to 9.\r\n * For instance: \"Welcome mister $1!\".\r\n *\r\n * Order doesn't matter and you can have several occurences of the same\r\n * placeholder.\r\n * For instance: \"Hello $2! Welcome into $1. $1 is the best...\".\r\n *\r\n * @param   {string} translation - A string which can own placeholders.\r\n * @param   {string[]} params - Array of replacements for placeholders.\r\n * @returns The transformed string.\r\n */\r\nfunction addParams(translation: string, params: string[]): string {\r\n    let output = '';\r\n    let mark = 0;\r\n    let mode: Mode = Mode.Text;\r\n    let paramIndex = -1;\r\n    let paramValue = '';\r\n\r\n    for (let index = 0; index < translation.length; index++) {\r\n        const c = translation.charAt(index);\r\n        switch (mode) {\r\n            case Mode.Text:\r\n                if (c === '\\\\') {\r\n                    mode = Mode.Escape;\r\n                    output += translation.substr(mark, index - mark);\r\n                    mark = index + 1;\r\n                }\r\n                else if (c === '$') {\r\n                    mode = Mode.Placeholder;\r\n                    output += translation.substr(mark, index - mark);\r\n                    mark = index + 2;\r\n                }\r\n                break;\r\n            case Mode.Escape:\r\n                mode = Mode.Text;\r\n                break;\r\n            case Mode.Placeholder:\r\n                mode = Mode.Text;\r\n                paramIndex = parseInt(c, 10);\r\n                if (isNaN(paramIndex))\r\n                    throw Error(`Parsing error at position ${index} for translation \"${translation}\"!\r\nEscape \"$\" if you don't want to use a placeholder.`);\r\n                paramValue = params[paramIndex - 1] || \"\";\r\n                output += paramValue;\r\n                break;\r\n            default:\r\n                mode = Mode.Text;\r\n        }\r\n    }\r\n\r\n    return output + translation.substr(mark);\r\n}\r\n","import * as React from \"react\"\r\nimport Icon from \"./icon\"\r\nimport \"./button.css\"\r\nimport Touchable from \"../behavior/touchable\"\r\nimport castArray from \"../converter/array\"\r\nimport castString from \"../converter/string\"\r\nimport castBoolean from \"../converter/boolean\"\r\n\r\ninterface IButtonProps {\r\n    label?: string;\r\n    icon?: string;\r\n    wide?: boolean;\r\n    wait?: boolean;\r\n    flat?: boolean;\r\n    small?: boolean;\r\n    warning?: boolean;\r\n    enabled?: boolean;\r\n    classes?: string[] | string;\r\n    tag?: any;\r\n    onClick?: (tag: any) => void;\r\n}\r\n\r\nexport default class Button extends React.Component<IButtonProps, {}> {\r\n    readonly touchable: Touchable;\r\n    readonly ref: React.RefObject<HTMLButtonElement>;\r\n\r\n    constructor(props: IButtonProps) {\r\n        super(props);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.touchable = new Touchable({ onTap: this.handleClick });\r\n        this.ref = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const element = this.ref.current;\r\n        if (!element) return;\r\n        this.touchable.element = element;\r\n    }\r\n\r\n    handleClick() {\r\n        const slot = this.props.onClick;\r\n        if (typeof slot !== 'function') return;\r\n        slot(this.props.tag);\r\n    }\r\n\r\n    render() {\r\n        const p = this.props,\r\n            label = castString(p.label, \"\"),\r\n            icon = castString(p.icon, \"\"),\r\n            wide = castBoolean(p.wide, false),\r\n            wait = castBoolean(p.wait, false),\r\n            flat = castBoolean(p.flat, false),\r\n            small = castBoolean(p.small, false),\r\n            enabled = !wait && castBoolean(p.enabled, true),\r\n            warning = castBoolean(p.warning, false),\r\n            classes = [\"tfw-view-button\"].concat(castArray(p.classes));\r\n        if (wide) classes.push(\"wide\");\r\n        if (flat) {\r\n            classes.push(\"flat\");\r\n            classes.push(warning ? \"thm-fgS\" : \"thm-fgP\");\r\n        }\r\n        else {\r\n            if (enabled) classes.push(\"thm-ele-button\");\r\n            classes.push(warning ? \"thm-bgS\" : \"thm-bgP\");\r\n        }\r\n        if (small) classes.push(\"small\");\r\n        if (label.length === 0) classes.push(\"floating\");\r\n\r\n        this.touchable.enabled = enabled;\r\n        return (\r\n            <button ref={this.ref}\r\n                className={classes.join(\" \")}\r\n                disabled={!enabled}>\r\n                {icon.length > 0\r\n                    ? <Icon content={icon}\r\n                        animate={wait}\r\n                        size={`${small ? 1.375 : 1.875}rem`} />\r\n                    : null}\r\n                {label.length > 0\r\n                    ? <div className=\"text\" > {label} </div>\r\n                    : null}\r\n            </button>);\r\n    }\r\n}\r\n","export default function castArray(v: any, defaultValue: any[] = []): any[] {\r\n    if (typeof v === 'undefined') return defaultValue;\r\n    if (Array.isArray(v)) return v;\r\n    return [v];\r\n}\r\n","import * as React from \"react\"\r\nimport ReactDOM from 'react-dom'\r\nimport Icon from \"../view/icon\"\r\nimport Flex from \"../layout/flex\"\r\nimport EscapeHandler from \"../escape-handler\"\r\nimport castString from \"../converter/string\"\r\nimport castBoolean from \"../converter/boolean\"\r\nimport \"./dialog.css\"\r\n\r\nimport Button from \"../view/button\"\r\n\r\nimport Intl from \"../intl\";\r\nconst _ = Intl.make(require(\"./dialog.yaml\"));\r\n\r\nexport default {\r\n    /**\r\n    * @param {string|React.ReactElement<any>} message\r\n    * @param {()=>void|null} onClose\r\n    */\r\n    alert,\r\n    /**\r\n    * @param {string} caption - Title and button caption.\r\n    * @param {any} content - Content to display.\r\n    * @return Promise<boolean> Confirmed or not?\r\n    */\r\n    confirm,\r\n    show,\r\n    wait\r\n};\r\n\r\ninterface IOptions {\r\n    onClose?: () => void;\r\n    closeOnEscape?: boolean;\r\n    icon?: string;\r\n    title?: string;\r\n    content?: string | React.ReactElement<any>;\r\n    footer?: React.ReactElement<any>[] | React.ReactElement<any> | null;\r\n    maxWidth?: number;\r\n}\r\n\r\nclass Dialog {\r\n    _screen: HTMLElement;\r\n    _options: IOptions;\r\n    footer: React.ReactElement<any>[] | React.ReactElement<any> | null = null;\r\n\r\n    constructor(options: IOptions = {}) {\r\n        this._options = Object.assign({\r\n            closeOnEscape: true,\r\n            footer: <Button\r\n                icon=\"close\"\r\n                label = { _('close') }\r\n                flat={ true}\r\n                onClick={() => this.hide()}/>\r\n        }, options);\r\n        this._options.closeOnEscape = castBoolean(this._options.closeOnEscape, true);\r\n        this.footer = this._options.footer || null;\r\n        const screen = document.createElement(\"div\");\r\n        screen.className = \"tfw-factory-dialog\";\r\n        document.body.appendChild(screen);\r\n        this._screen = screen;\r\n        this.hide = this.hide.bind(this);\r\n        if (this._options.closeOnEscape) {\r\n            EscapeHandler.add(() => this._hide());\r\n        }\r\n    }\r\n\r\n    set onClose(slot: () => void) {\r\n        this._options.onClose = slot;\r\n    }\r\n\r\n    show() {\r\n        const opt = this._options;\r\n        const title = castString(opt.title, \"\").trim();\r\n        const icon = castString(opt.icon, \"\").trim();\r\n        let footer: React.ReactElement<any> | null =\r\n            this.footer ? (<footer className= \"thm-bg2 thm-ele-button\">{\r\n                this.footer\r\n            }</footer>) : null;\r\n            let header = null;\r\n        if (title.length > 0) {\r\n            header = (\r\n                <header className= \"thm-bgPD\">\r\n                    { icon.length > 0 ? <Icon content={ icon } /> : null}\r\n                    <div>{title}</div>\r\n                </header>\r\n            )\r\n        }\r\n\r\n        ReactDOM.render((\r\n            <div\r\n                className=\"thm-ele-dialog thm-bg1\"\r\n                style={{\r\n                    maxWidth: typeof opt.maxWidth === 'number' ? `${opt.maxWidth}px` : \"auto\"\r\n                }}>\r\n                {header}\r\n                <div>{opt.content}</div>\r\n                {footer}\r\n            </div>\r\n        ), this._screen);\r\n        setTimeout(() => this._screen.classList.add(\"show\"), 10);\r\n    }\r\n\r\n    hide() {\r\n        if (!this._options.closeOnEscape) {\r\n            this._hide();\r\n        } else {\r\n            EscapeHandler.fire();\r\n        }\r\n    }\r\n\r\n    _hide() {\r\n        const screen = this._screen;\r\n        screen.classList.remove(\"show\");\r\n        setTimeout(() => {\r\n            document.body.removeChild(screen);\r\n        }, 200);\r\n        const onClose = this._options.onClose;\r\n        if (typeof onClose === 'function') {\r\n            requestAnimationFrame(onClose);\r\n        }\r\n    }\r\n}\r\n\r\nfunction alert(content: string | React.ReactElement<any>,\r\n               onClose: (() => void) | undefined = undefined): Promise<void> {\r\n    return new Promise(resolve => {\r\n        const dialog = new Dialog({ onClose: resolve, content, maxWidth: 420 });\r\n        dialog.footer = (<Button\r\n            icon=\"close\"\r\n            label={_('close')}\r\n            flat={true}\r\n            onClick={resolve} />);\r\n        dialog.show();\r\n    });\r\n}\r\n\r\n/**\r\n * ```\r\n * const isConfirmed = await Dialog.confirm(\"Delete file\", <p>Are you sure?</p>);\r\n * ```\r\n * @param caption - Title and button caption.\r\n * @param content - Content to display.\r\n */\r\nfunction confirm( caption: string,\r\n                  content: string | React.ReactElement<any>): Promise<boolean> {\r\n    return new Promise( resolve => {\r\n        const dialog = new Dialog({ title: caption, content });\r\n        const close = (confirmed: boolean) => {\r\n            dialog.hide();\r\n            resolve( confirmed );\r\n        };\r\n        dialog.onClose = () => close(false);\r\n        const btnCancel = (<Button\r\n            key=\"cancel\"\r\n            flat={true}\r\n            label={_(\"cancel\")}\r\n            onClick={() => close(false)}/>);\r\n        const btnOK = (<Button\r\n            key=\"ok\"\r\n            warning={true}\r\n            label={caption}\r\n            onClick={() => close(true)}/>);\r\n        dialog.footer = [ btnCancel, btnOK ];\r\n        dialog.show();\r\n    });\r\n}\r\n\r\nfunction show(options: IOptions): Dialog {\r\n    const dialog = new Dialog(options);\r\n    dialog.show();\r\n    return dialog;\r\n}\r\n\r\nasync function wait(label: string, task: Promise<any>, blocking: boolean = true): Promise<any> {\r\n    if (!blocking) {\r\n        return await task;\r\n    }\r\n    const content = (\r\n        <Flex dir=\"row\" justifyContent=\"flex-start\" alignItems=\"center\" >\r\n            <Icon content=\"wait\" animate={true}/>\r\n            <div>{label}</div>\r\n        </Flex>\r\n    );\r\n    const dialog = new Dialog({ content, footer: null, closeOnEscape: false });\r\n    dialog.show();\r\n    const close = dialog.hide.bind( dialog );\r\n    return new Promise( (resolve, reject) => {\r\n        task.then(\r\n            (result: any) => {\r\n                close();\r\n                resolve( result );\r\n            },\r\n            (error: any) => {\r\n                console.error( error );\r\n                close();\r\n                reject( error );\r\n            }\r\n        );\r\n    });\r\n}\r\n","import React from \"react\"\nimport Icon from '../../../tfw/view/icon'\nimport Input from '../../../tfw/view/input'\nimport Diagram from '../diagram'\nimport Rnd from '../../../tfw/random'\nimport Dialog from '../../../tfw/factory/dialog'\n\nimport \"./diagram-exam.css\"\n\ninterface IDiagramExamProps {\n    diagramCode: string,\n    diagramLabel: string\n}\n\ninterface IDiagramExamState {\n    attempts: number,\n    successes: number,\n    items: string[],\n    solution: string,\n    answer: string,\n    failure: boolean\n}\n\nexport default class DiagramExam extends React.Component<IDiagramExamProps, IDiagramExamState> {\n    constructor( props: IDiagramExamProps ) {\n        super( props );\n        this.state = {\n            attempts: 0,\n            successes: 0,\n            items: [],\n            solution: '',\n            answer: '',\n            failure: false\n        }\n    }\n\n    pickNewSolution(items: string[]) {\n        const currentSolution = this.state.solution\n        for (let i=0 ; i<10 ; i++) {\n            const solution = Rnd.pick(items)\n            if (solution !== currentSolution) return solution\n        }\n        return Rnd.pick(items)\n    }\n\n    handleAnswerChange = (answer: string) => {\n        this.setState({ answer })\n    }\n\n    handleAnswer = (answer: string) => {\n        if (answer.toLowerCase() === this.state.solution.toLowerCase()) {\n            if (this.state.attempts === 19) {\n                Dialog.alert(\n                    <div><p>Votre score :</p><p><b>{this.state.successes} / 20</b></p></div>,\n                    () => window.location.reload()\n                )\n            }\n            const solution = this.pickNewSolution(this.state.items)\n            this.setState({\n                answer: '',\n                attempts: this.state.attempts + 1,\n                successes: this.state.successes + 1,\n                solution\n            })\n        } else {\n            this.setState({ failure: true })\n        }\n    }\n\n    handleItemsChange = (items: string[]) => {\n        const solution = this.pickNewSolution(items)\n        console.info(\"solution=\", solution);\n        this.setState({\n            items, attempts: 0, successes: 0,\n            answer: '', solution\n         })\n    }\n\n    handleErrorClick = () => {\n        this.setState({\n            attempts: this.state.attempts + 1,\n            answer: '',\n            failure: false\n        })\n    }\n\n    render() {\n        const { diagramCode, diagramLabel } = this.props\n        const { attempts, successes, solution, answer, failure } = this.state\n\n        return (<div className=\"dummyPaces-view-DiagramExam\">\n            <header className=\"thm-bgPD\">\n                <Icon content=\"back\" />\n                <div className=\"title\">{diagramLabel}</div>\n                <div className=\"score\">\n                    <span className=\"score\">{successes}</span>\n                    <span className=\"separator\"> / </span>\n                    <span className=\"total\">{attempts}</span>\n                </div>\n            </header>\n            <Diagram\n                htmlContent={diagramCode}\n                itemToShow={solution}\n                onItemsChange={this.handleItemsChange}/>\n            <div className=\"answer\">{\n                failure ?\n                <div className='error'\n                    title=\"Cliquez pour fermer\"\n                    onClick={this.handleErrorClick}>{solution}</div> :\n                <Input\n                    focus={true}\n                    onChange={this.handleAnswerChange}\n                    onEnterPressed={this.handleAnswer}\n                    type=\"text\"\n                    value={answer}\n                    wide={true}\n                    label=\"Nommez la partie du diagramme en orange\"/>\n            }</div>\n        </div>)\n    }\n}\n","export default {\n    padNumber(value: number, size: number = 6, fillWith: string = '0'): string {\n        let text = `${value}`;\n        while (text.length < size) {\n            text = fillWith.charAt(0) + text;\n        }\n        return text;\n    },\n\n    clamp(value: number, min: number = 0, max: number = 1) {\n        if (value < min) return min;\n        if (value > max) return max;\n        return value;\n    },\n\n    loadTextFromURL(url: string): Promise<string> {\n        return new Promise((resolve, reject) => {\n            fetch(url)\n                .then((response: Response) => {\n                    if (!response.ok) {\n                        reject(`Error ${response.status}: ${response.statusText}!`);\n                    }\n                    return response.text();\n                })\n                .then(resolve)\n                .catch(reject);\n        });\n    },\n\n    loadJsonFromURL(url: string): Promise<any> {\n        return new Promise((resolve, reject) => {\n            fetch(url)\n                .then((response: Response) => {\n                    return response.json();\n                })\n                .then(resolve)\n                .catch(reject);\n        });\n    }\n}\n","import React from \"react\"\nimport { IQuestion, ICategory } from '../types'\nimport Data from '../data'\nimport Question from '../view/question'\nimport Answer from '../view/answer'\nimport DiagramExam from '../view/diagram-exam'\nimport Os from '../data/diagrams/os.svg'\nimport Util from '../../tfw/util'\nimport Random from '../../tfw/random'\n\nimport \"./app.css\"\n\ninterface IAppState {\n    categories: ICategory[],\n    currentCategory: ICategory,\n    currentQuestionIndex: number,\n    currentAnswer: string,\n    answerVisible: boolean,\n    answersCount: number,\n    failuresCount: number,\n\n    currentDiagramCode: string,\n    currentDiagramItem: string\n}\n\nexport default class App extends React.Component<{}, IAppState> {\n    constructor( props: {} ) {\n        super( props );\n\n        this.state = {\n            categories: [],\n            currentCategory: {\n                id: \"\",\n                label: \"\",\n                questions: []\n            },\n            currentQuestionIndex: 0,\n            currentAnswer: \"\",\n            answerVisible: false,\n            answersCount: 0,\n            failuresCount: 0,\n            currentDiagramCode: \"\",\n            currentDiagramItem: \"\"\n        }\n    }\n\n    nextQuestion() {\n        const { categories } = this.state\n        const currentCategory = categories[0]\n\n        const currentQuestionIndex = Math.floor(\n            Math.random() * currentCategory.questions.length\n        )\n\n        this.setState({\n            currentCategory,\n            currentQuestionIndex,\n            currentAnswer: \"\",\n            answerVisible: false\n        })\n    }\n\n    async componentDidMount() {\n        const categories = Data.load();\n        this.setState({\n            categories,\n            currentCategory: categories[0],\n            currentQuestionIndex: Math.floor(\n                Math.random() * categories[0].questions.length),\n            answersCount: 0,\n            failuresCount: 0\n        })\n\n        const currentDiagramCode = await Util.loadTextFromURL(Os)\n        this.setState({ currentDiagramCode })\n\n        const splash = document.getElementById('splash-screen');\n        if (splash) {\n            splash.classList.add(\"vanish\");\n            window.setTimeout(() => document.body.removeChild(splash), 600);\n        }\n    }\n\n    handleAbort = () => {}\n\n    handleAnswer = () => {\n        const {\n            currentCategory, currentQuestionIndex, currentAnswer,\n            answersCount, failuresCount\n        } = this.state;\n        const question = currentCategory.questions[currentQuestionIndex];\n        const expectedAnswer = question.answer.toLowerCase();\n        if (currentAnswer.toLowerCase() !== expectedAnswer) {\n            this.setState({\n                answerVisible: true, failuresCount: failuresCount + 1\n            });\n        }\n        else {\n            this.nextQuestion();\n        }\n        this.setState({ answersCount: answersCount + 1, currentAnswer: \"\" })\n    }\n\n    handleAnswerChange = (currentAnswer: string) => {\n        this.setState({ currentAnswer });\n    }\n\n    handleCloseAnswer = () => {\n        this.setState({ answerVisible: false })\n    }\n\n    handleDiagramItemsChange = (items: string[]) => {\n        this.setState({ currentDiagramItem: Random.pick(items) })\n    }\n\n    render() {\n        const {\n            currentCategory, currentQuestionIndex, currentAnswer,\n            answerVisible, answersCount, failuresCount\n        } = this.state;\n        if (!currentCategory) return null;\n        if (currentCategory.questions.length === 0) return null;\n\n        const question = currentCategory.questions[currentQuestionIndex];\n\n        return (<div className=\"dummyPaces-App\">\n            <DiagramExam\n                diagramCode={this.state.currentDiagramCode}\n                diagramLabel=\"Tissus osseux\"/>\n            {/*\n            <Question\n                onAbort={this.handleAbort}\n                onAnswer={this.handleAnswer}\n                onAnswerChange={this.handleAnswerChange}\n                answersCount={answersCount}\n                questionIndex={currentQuestionIndex}\n                failuresCount={failuresCount}\n                isNumerical={false}\n                category={currentCategory}\n                answer={currentAnswer}/>\n            <Answer\n                visible={answerVisible}\n                answer={question.answer}\n                question={question.label}\n                onBackClick={this.handleCloseAnswer}/>\n            */}\n        </div>)\n    }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './dummy-paces/app';\nimport * as serviceWorker from './serviceWorker';\n\nimport Theme from \"./tfw/theme\"\nimport \"./tfw/font/josefin.css\"\n\nTheme.register(\"default\", {\n    white: \"#adf\", black: \"#024\",\n    bg0: \"#97cbff\", bg1: \"#b3daff\", bg2: \"#cce6ff\", bg3: \"#e6f3ff\",\n    bgP: \"#247\", bgPL: \"#359\", bgPD: \"#135\",\n    bgS: \"#309fff\", bgSD: \"#007fff\", bgSL: \"#60bfff\"\n});\nTheme.apply(\"default\");\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}